http://www.davespace.co.uk/arm/introduction-to-arm/immediates.html
HTTP/1.1 200 OK
Server: Zeus/4.3
Last-Modified: Sun, 08 Jun 2014 19:51:42 GMT
Vary: Accept-Encoding
Content-Type: text/html
Accept-Ranges: bytes
Content-Encoding: gzip
Content-Length: 3490
Date: Wed, 23 Jul 2014 14:10:55 GMT
X-Varnish: 343564268
Age: 0
Via: 1.1 varnish
Connection: close


<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="author" content="David Thomas">
  <meta name="keywords" content="DaveSpace, David Thomas, Dave Thomas">
  <meta name="description" content="David Thomas's website.">

  <title>ARM: Introduction to ARM: Immediate Values | DaveSpace</title>

  <link rel="icon" type="image/vnd.microsoft.icon" href="../../favicon.ico" />
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../favicon.ico" />

  <link rel="stylesheet" type="text/css" href="../../style/flat.css">

  <link rel="alternate" type="application/atom+xml" title="DaveSpace feed" href="../../blog.atom">

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29131837-1']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body id="arm">

  <div id="header">
    <h1><i class="fa fa-cogs"></i> <a href="../../">DaveSpace</a></h1>
  </div>

  <div id="nav">
    

<h4>ARM:<br/>Introduction to ARM</h4>
<ul class="fa-ul">
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/">Start</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/why-learn.html">Why Learn Assembly Language?</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/not-trivial.html">Not a Trivial Mapping</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/instruction-sets.html">Instruction Sets</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/registers.html">Registers</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/pc.html">Program Counter</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/syntax.html">Instruction Syntax</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/organisation.html">Organisation</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/movement.html">Movement</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arithmetic.html">Arithmetic Instructions</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/logical.html">Logical Instructions</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/compare.html">Compare Instructions</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/barrel-shifter.html">Barrel Shifter</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/operand2.html">Operand2</a></li>
  
  <li><i class="fa-li fa fa-dot-circle-o"></i> <a href="../../arm/introduction-to-arm/immediates.html">Immediate Values</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/branch.html">Branch Instructions</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/conditional.html">Conditional Execution</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/multiply.html">Multiply Instructions</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/data-transfer.html">Single Register Data Transfer</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/addressing.html">Addressing Modes</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/multiple-data-transfer.html">Multiple Register Data Transfer</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/stack.html">The Stack</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/chain.html">A Call Chain</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/task-one.html">Task One</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/task-one-answers.html">Task One - Answers</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/task-two.html">Task Two</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/task-two-answers.html">Task Two - Answers</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/thumb.html">Thumb</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/interworking.html">Interworking</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/thumb-example.html">Thumb Example</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/thumb-2.html">Thumb-2</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-ltd.html">ARM Ltd.</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-tools.html">Tools</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-apps.html">Applications</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch.html">ARM Architecture</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch123.html">Early Architectures</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch4.html">Architecture 4</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch5.html">Architecture 5</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch6.html">Architecture 6</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-arch7.html">Architecture 7</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-cores.html">Summary of current ARM cores</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-inside.html">What’s inside various devices?</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/arm-test.html">Test</a></li>
  
  <li><i class="fa-li fa fa-circle-o"></i> <a href="../../arm/introduction-to-arm/books.html">Books</a></li>
  
</ul>


    
<h4>Categories</h4>
<ul class="fa-ul">
  <li><i class="fa-li fa fa-chevron-circle-right"></i> <a href="../../arm/">ARM</a></li>
  <li><i class="fa-li fa fa-chevron-circle-right"></i> <a href="../../doodles/">Doodles</a></li>
  <li><i class="fa-li fa fa-chevron-circle-right"></i> <a href="../../projects/">Projects</a></li>
  <li><i class="fa-li fa fa-chevron-circle-right"></i> <a href="../../python/">Python</a></li>
  <li><i class="fa-li fa fa-chevron-circle-right"></i> <a href="../../risc.os/">RISC&nbsp;OS</a></li>
</ul>

    
<h4>Tags</h4>
<p><a href="../../tags/EfficientC.html">EfficientC</a> <a href="../../tags/Slide.html">Slide</a> <a href="../../tags/BasicOptimisation.html">BasicOptimisation</a> <a href="../../tags/TargetedOptimisation.html">TargetedOptimisation</a> <a href="../../tags/MotionMasks.html">MotionMasks</a> <a href="../../tags/Game.html">Game</a> <a href="../../tags/TheGreatEscape.html">TheGreatEscape</a> <a href="../../tags/Script.html">Script</a> <a href="../../tags/Python.html">Python</a> <a href="../../tags/Iyonix.html">Iyonix</a> <a href="../../tags/QuickFiler.html">QuickFiler</a> <a href="../../tags/ARM.html">ARM</a> <a href="../../tags/IntroductionToARM.html">IntroductionToARM</a> <a href="../../tags/RISC OS.html">RISC OS</a> <a href="../../tags/PrivateEye.html">PrivateEye</a> <a href="../../tags/PhotoFiler.html">PhotoFiler</a> <a href="../../tags/Geminus.html">Geminus</a> <a href="../../tags/Toolbar.html">Toolbar</a> <a href="../../tags/Site.html">Site</a> <a href="../../tags/Containers.html">Containers</a> <a href="../../tags/GitHub.html">GitHub</a> <a href="../../tags/Hardware.html">Hardware</a> <a href="../../tags/Doodle.html">Doodle</a> <a href="../../tags/Trace.html">Trace</a> <a href="../../tags/Project.html">Project</a> </p>


    
<h4>About me</h4>
<ul class="fa-ul">
  <li><i class="fa-li fa fa-male"></i> David Thomas</li>
  <li><i class="fa-li fa fa-wrench"></i> Software Engineer</li>
  <li><i class="fa-li fa fa-location-arrow"></i> Glasgow, Scotland</li>
</ul>

<h5>Contact</h5>
<ul class="fa-ul">
  <li><i class="fa-li fa fa-envelope"></i> Email<br/> <a href="mailto:dave@davespace.co.uk">dave@davespace.co.uk</a></li>
  <li><i class="fa-li fa fa-twitter"></i> Twitter<br/> <a href="https://twitter.com/bagospanners">@bagospanners</a></li>
  <li><i class="fa-li fa fa-users"></i> IRC<br/> <em>spanners</em> on <a href="http://freenode.net/">Freenode</a></li>
</ul>

<h5>Tasty Links</h5>
<ul class="fa-ul">
  <li><i class="fa-li fa fa-github"></i> <a href="https://github.com/dpt">dpt on GitHub</a><br/>
  – my projects</li>
  <li><i class="fa-li fa fa-twitter"></i> <a href="https://twitter.com/bagospannersurl">@bagospannersurl</a><br/>
  – interesting links</li>
  <li><i class="fa-li fa fa-paperclip"></i> <a href="https://delicious.com/dpt">dpt on delicious</a><br/>
  – older interesting links</li>
</ul>

  </div>

<!-- start page -->

<!-- start post -->
<article>
  <header>
    <!-- start post header -->
    <h1><i class="fa fa-compass"></i> ARM: Introduction to ARM: Immediate Values</h1>
    
<!-- start meta -->
<div class="meta">
  by <span class="author">David Thomas</span> on <time datetime="2012-03-03T00:00:00Z">03 March 2012</time> &mdash;
  <ul>
    <li><i class="fa fa-tag"></i> <a href="../../tags/ARM.html">ARM</a></li>
<li><i class="fa fa-tag"></i> <a href="../../tags/IntroductionToARM.html">IntroductionToARM</a></li>
<li><i class="fa fa-tag"></i> <a href="../../tags/Slide.html">Slide</a></li>

  </ul>
</div>
<!-- end meta -->

    <!-- end post header -->
  </header>

  
  <!-- start post content -->
  <section>
    <section>
<div class="slide">

<h2>Immediate Values</h2>

<ul>
<li>You can’t fit an arbitrary 32-bit value into a 32-bit instruction word.</li>
<li>ARM data processing instructions have 12 bits of space for values in their instruction word. This is arranged as a four-bit rotate value and an eight-bit immediate value:</li>
</ul>

<p><img src="img/dia/immediate.png" alt="Immediate values.">
</p>

<p>The 4-bit rotate value stored in bits 11-8 is multiplied by two giving a range of 0-30 in steps of two.</p>

<p>Using this scheme we can express immediate constants such as:</p>

<ul>
<li><code>0x000000FF</code></li>
<li><code>0x00000FF0</code></li>
<li><code>0xFF000000</code></li>
<li><code>0xF000000F</code></li>
</ul>

<p>But immediate constants such as:</p>

<ul>
<li><code>0x000001FE</code></li>
<li><code>0xF000F000</code></li>
<li><code>0x55550000</code></li>
</ul>

<p>&hellip;are not possible.</p>

<p>An assembler will convert big values to the rotated form. Impossible values will cause an error.</p>

<p>Some assemblers will use other tricks such as using <code>MVN</code> instead of <code>MOV</code> to form the bitwise complement of the required constant. For example the impossible instruction <code>MOV r0,#0xFFFFFFFF</code> could be assembled as <code>MVN r0,#0</code>.</p>

</div>
</section>
<section>
<div class="remarks">

<h2>Remarks</h2>

<p>The impact of this is that some constants are “ARM friendly”. Some are not. Study of the numbers you’re using can sometimes reveal scope for <a href="../efficient-c-for-arm/biasing.html">optimisation</a>.</p>

</div>
</section>
<section>
<div class="slide">

<h2>Loading Wide Values</h2>

<p>You can form constants wider than those available in a single instruction by using a sequence of instructions to build up the constant. For example:</p>

<div class="highlight"><pre><span class="nf"><span class="k">MOV</span></span> r2, <span class="mh"><span class="mi">#0</span>x55</span>           <span class="c1">; R2 = 0x00000055</span>
<span class="nf"><span class="k">ORR</span></span> r2, r2, r2, <span class="k">LSL</span> <span class="mi">#8</span>  <span class="c1">; R2 = 0x00005555</span>
<span class="nf"><span class="k">ORR</span></span> r2, r2, r2, <span class="k">LSL</span> <span class="mi">#16</span> <span class="c1">; R2 = 0x55555555</span>
</pre></div>

<p>&hellip;or load the value from memory:</p>

<div class="highlight"><pre><span class="nf"><span class="k">LDR</span></span> r2, =0x55555555
</pre></div>

<p>The pseudo-instruction <code>LDR Rx,=const</code> tries to form the constant in a single instruction, if possible, otherwise it will generate an <code>LDR</code>.</p>
</div>
</section>

    
<!-- start flip -->

<div class="flip">
  <h2>Navigate</h2>
  <div class="previous">
    <a href="operand2.html"><i class="fa fa-arrow-circle-left"></i> 

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
  Operand2
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</a>
  </div>
  <div class="next">
    <a href="branch.html">

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
  Branch Instructions
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

 <i class="fa fa-arrow-circle-right"></i></a>
  </div>
</div>

<!-- end flip -->

  </section>
  <!-- end post content -->
</article>
<!-- end post -->

<!-- end page -->

  <div id="footer">
    Copyright © David Thomas, 2005-2014<br/>
    Built using <i class="fa fa-leaf"></i> <a href="https://github.com/piranha/gostatic">gostatic</a> and <i class="fa fa-flag"></i> <a href="http://fontawesome.io/">Font Awesome</a><br/>
    <strong>Like this Site?</strong> Send <i class="fa fa-btc"></i> to 1PSXsRq4gXWKsxWSbmvmjCWsmD49MdNgJN to support it. Thanks!
  </div>
</body>
</html>


