http://www.ipv6-test.com/
HTTP/1.1 200 OK
Date: Wed, 23 Jul 2014 13:57:28 GMT
Server: Apache/2.4.9 (Debian)
X-Powered-By: PHP/5.6.0RC1
Set-Cookie: PHPSESSID=fls1b7frvf823424cthep8np43; expires=Wed, 23-Jul-2014 14:12:28 GMT; Max-Age=900; path=/; domain=.ipv6-test.com
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 6200
Connection: close
Content-Type: text/html; charset=UTF-8

<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8" />
		<title>IPv6 test - IPv6/4 connectivity and speed test</title>
		<meta name="description" content="IPv6-test.com is a free service that checks your IPv6 and IPv4 connectivity and speed. Diagnose connection problems, discover which address(es) you are currently using to browse the Internet, and what is your browser's protocol of choice when both v6 and v4 are available." />
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" href="/css/bootstrap.min.css" />
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="/css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="/css/main.css" />
        <script src="/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-15976696-1']);
		  _gaq.push(['_setDomainName', 'ipv6-test.com']);
		  _gaq.push(['_trackPageview']);

		  (function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

		</script>
	</head>
	<body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" style="position:relative;top:-13px" href="http://ipv6-test.com"><img src="/img/logo.png" alt="logo" /></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
<li class='active internal'><a href='http://ipv6-test.com/' title='General'>General</a></li><li class='internal'><a href='http://ipv6-test.com/speedtest/' title='Speed'>Speed</a></li><li class='internal'><a href='http://ipv6-test.com/pingtest/' title='Ping'>Ping</a></li><li class='internal'><a href='http://ipv6-test.com/validate.php' title='Website'>Website</a></li><li class='internal'><a href='http://ipv6-test.com/stats/' title='Stats'>Stats</a></li><li class='internal'><a href='http://ipv6-test.com/api/' title='API'>API</a></li>		  </ul>
		</div><!--/.navbar-collapse -->
      </div>
    </div>

<div id='error_box' style='display:none'>
</div>

<script>
function show_error(s) {
	$("#error_box").html("<span style='font-weight:bold;'>ERROR</span><br />" + s).slideDown().click(function() {});
}

function show_warning(s) {
	$("#error_box").html("<span style='font-weight:bold;'>WARNING</span><br />" + s).slideDown().click(function() { $(this).fadeOut(); });
}
</script>

<div class='container'>
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- ipv6-test page top responsive -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-9895291552337649"
		 data-ad-slot="5790054602"
		 data-ad-format="auto"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
<noscript>
<div class='addr_box'>
<div class='addr_small'>Your are using <span class='v4'>IPv4</span> to browse this site.</div><div class='addr_body'>54.227.40.166</div><div class='addr_small'>ec2-54-227-40-166.compute-1.amazonaws.com</div></div><p class='alert alert-warning'>
Your browser does not appear to have <i>Javascript</i> support enabled. Without it IPv6-test.com can only show you the address for the default protocol your browser is using.
</p>
</noscript>
<div id='main_test_spacer' class='hidden-xs'>
	<p>IPv6-test.com is a free service that checks your IPv6 and IPv4 connectivity and speed. Diagnose connection problems, discover which address(es) you are currently using to browse the Internet, and what is your browser's protocol of choice when both v6 and v4 are available.</p>
</div>
<div id='hide_noscript' style='display:none' class="main_test">
	<div class="row">
		<div class="col-lg-6 col-md-7">

			<div class="panel panel-default">
				<div class="panel-heading">
					<span id="refresh_v4" class="glyphicon glyphicon-refresh pull-right refresh"></span>
					<h3 class="panel-title">IPv4 connectivity</h3>
				</div>
				<div class="panel-body">
					<table id="v4_conn" class="table">
						<tr>
							<th>IPv4</th>
							<td class="proto_supported"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This test determines whether your connection supports the IPv4 protocol"></span></td>
						</tr>
						<tr>
							<th>Address</th>
							<td class="proto_address"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Your IPv4 address is the address your ISP has assigned to you on the IPv4 Internet"></span></td>
						</tr>
						<tr>
							<th>Hostname</th>
							<td class="proto_hostname"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Your hostname is the name by which your computer is known on the IPv4 Internet"></span></td>
						</tr>
						<tr>
							<th>ISP</th>
							<td class="proto_isp"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This is the Internet Service Provider that connects you to the IPv4 Internet"></span></td>
						</tr>
					</table>
				</div>
			</div>			

			<div class="panel panel-default">
				<div class="panel-heading">
					<span id="refresh_v6" class="glyphicon glyphicon-refresh pull-right refresh"></span>
					<h3 class="panel-title">IPv6 connectivity</h3>
				</div>
				<div class="panel-body">
					<table id="v6_conn" class="table">
						<tr>
							<th>IPv6</th>
							<td class="proto_supported"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This test determines whether your connection supports the IPv6 protocol"></span></td>
						</tr>
						<tr>
							<th>Address</th>
							<td class="proto_address"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Your IPv6 address is the address your ISP has assigned to you on the IPv6 Internet"></span></td>
						</tr>
						<tr>
							<th>Type</th>
							<td class="proto_type"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="A native address means a direct IPv6 connectivity, 6to4 and Teredo use IPv4 to IPv6 tunnels to provide IPv6 support in networks that don't fully support IPv6 yet"></span></td>
						</tr>
						<tr class="proto_has_tunnel_server">
							<th><span class="proto_tunnel_server_type"></span> server</th>
							<td class="proto_tunnel_server"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="The tunnel server address identifies the IPv4 server that bridges your connection to the IPv6 Internet"></span></td>
						</tr>
						<tr class="proto_has_tunnel_client">
							<th>v4 address</th>
							<td class="proto_tunnel_client"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This is your IPv4 address as seen by the IPv6 tunnel server"></span></td>
						</tr>
						<tr>
							<th>SLAAC</th>
							<td class="proto_slaac"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Stateless address autoconfiguration is a mean for an IPv6 host to assign itself an address based on its hardware MAC without asking a DHCP server. Using SLAAC without privacy extensions (RFC4941) is not recommended."></span></td>
						</tr>
						<tr class="proto_has_slaac">
							<th>MAC addr.</th>
							<td class="proto_mac_addr"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This is your network adapter MAC address as computed from your SLAAC obtained address"></span></td>
						</tr>
						<tr class="proto_has_slaac">
							<th>MAC vendor</th>
							<td class="proto_mac_vendor"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="The data leaked by SLAAC enable websites you visit to identify your network adapter vendor"></span></td>
						</tr>
						<tr>
							<th>ICMP</th>
							<td class="proto_icmp"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="IPv6 relies heavily on ICMP, a control protocol that Internet hosts use to signal error conditions"></span></td>
						</tr>
						<tr>
							<th>Hostname</th>
							<td class="proto_hostname"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Your hostname is the name by which your computer is known on the IPv6 Internet"></span></td>
						</tr>
						<tr>
							<th>ISP</th>
							<td class="proto_isp"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This is the Internet Service Provider that connects you to the IPv6 Internet"></span></td>
						</tr>
					</table>
				</div>
			</div>			

		</div>

		<div class="col-lg-6 col-md-5">

			<div class="panel panel-default">
				<div class="panel-heading">
					<span id="toggle_advise" class="glyphicon glyphicon-list pull-right refresh"></span>
					<h3 class="panel-title">Score</h3>
				</div>
				<div id="score" class="panel-body">
					<div class="row">
						<div class="col-lg-9 col-md-7 col-sm-9 hidden-xs">
							<div id="progress_score" class="progress">
								<div class="progress-bar" role="progressbar" style="width:0"></div>
							</div>
						</div>
						<div class="col-lg-3 col-md-5 col-sm-3 col-xs-7 text-right">
							<h2>...</h2>
						</div>
					</div>
					<div id="advise" style="display:none">
						<br />
						<p>How can you improve your score ?</p>
						<div class="panel-group" id="advise_list"></div>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>			
			
			<div class="panel panel-default">
				<div class="panel-heading">
					<span id="refresh_browser" class="glyphicon glyphicon-refresh pull-right refresh"></span>
					<h3 class="panel-title">Browser</h3>
				</div>
				<div class="panel-body">
					<table id="browser" class="table">
						<tr>
							<th>Default</th>
							<td class="browser_default"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="This is the protocol selected by your browser when a site can be reached via both IPv4 and IPv6"></span></td>
						</tr>
						<tr>
							<th>Fallback</th>
							<td class="browser_fallback"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Whether or not your browser falls back to the other protocol if its default above does not work"></span></td>
						</tr>
					</table>
				</div>
			</div>			
			
			<div class="panel panel-default">
				<div class="panel-heading">
					<span id="refresh_dns" class="glyphicon glyphicon-refresh pull-right refresh"></span>
					<h3 class="panel-title">DNS</h3>
				</div>
				<div class="panel-body">
					<table id="dns" class="table">
						<tr>
							<th>DNS4 + IP6</th>
							<td class="dns_dns4_ip6"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Connectivity to an IPv6 address served by an IPv4-only name server"></span></td>
						</tr>
						<tr>
							<th>DNS6 + IP4</th>
							<td class="dns_dns6_ip4"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Connectivity to an IPv4 address served by an IPv6-only name server"></span></td>
						</tr>
						<tr>
							<th>DNS6 + IP6</th>
							<td class="dns_dns6_ip6"></td>
							<td><span class="glyphicon glyphicon-question-sign" data-toggle="popover" data-trigger="hover" data-content="Connectivity to an IPv6 address served by an IPv6-only name server"></span></td>
						</tr>
					</table>
				</div>
			</div>			
		
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">More</h3>
				</div>
				<div class="panel-body">
					<div class="row">
						<div class="col-lg-6 col-md-6 col-sm-6 text-center">
							<a class="btn btn-primary btn-lg" href="/speedtest/">Speed test &raquo;</a>
							<p class="visible-xs"></p>
						</div>
						<div class="col-lg-6 col-md-6 col-sm-6 text-center">
							<a class="btn btn-info btn-lg" href="/pingtest/">Ping test &raquo;</a>
						</div>
					</div>
				</div>
			</div>			
			
		</div>
	</div>
</div>

<script>

var progress_bar = '<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width:0"></div></div>';
var pending = 0;
var results = {
	v4_support: 0,
	v6_support: 0,
	v6_native: 0,
	v6_no_slaac: 0,
	v6_hostname: 0,
	br_default_v6: 0,
	br_fallback: 0,
	dns_n4i6: 0,
	dns_n6i4: 0,
	dns_n6i6: 0,
};

function test_started() {
	pending++;
}

function test_finished() {
	if (--pending === 0) {
		update_score();
	}
}

function test_v4_conn() {
	var $p = $("#v4_conn");
	$p.find(".proto_supported").html(progress_bar).find(".progress-bar").css("width", "100%");
	$p.find(".proto_address, .proto_hostname, .proto_isp").empty();
	test_started();
	$.ajax({
		url: "http://v4.ipv6-test.com/json/addrinfo.php?PHPSESSID=fls1b7frvf823424cthep8np43",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			$p.find(".proto_supported").html("<span class='label label-success' style='font-size:1em'>Supported</span>");
			$p.find(".proto_address").html("<a target='_blank' href='" + resp.info_url + "'>" + resp.address + "</a>");
			$p.find(".proto_hostname").html(resp.hostname ? resp.hostname : "<span class='label label-warning'>None</span>");
			$p.find(".proto_isp").html(resp.isp_name + " <a href='http://ipv6-test.com/stats/country/" + resp.country_code + "'><img src='/img/flags/" + resp.country_code + ".png' title='" + resp.country + "' /></a>");
			results.v4_support = 1;
		},
		error: function(xopt, err) {
			$p.find(".proto_supported").html("<span class='label label-danger' style='font-size:1em'>Not supported</span>");
			results.v4_support = 0;
		},
		complete: test_finished,
	});
}

function test_v6_conn() {
	var $p = $("#v6_conn");
	$p.find(".proto_supported").html(progress_bar).find(".progress-bar").css("width", "100%");
	$p.find(".proto_address, .proto_type, .proto_tunnel_server, .proto_tunnel_server_type, .proto_tunnel_client, .proto_slaac, .proto_mac_addr, .proto_mac_vendor, .proto_hostname, .proto_isp, .proto_icmp").empty();
	test_started();
	$.ajax({
		url: "http://v6.ipv6-test.com/json/addrinfo.php?PHPSESSID=fls1b7frvf823424cthep8np43",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			$p.find(".proto_supported").html("<span class='label label-success' style='font-size:1em'>Supported</span>");
			$p.find(".proto_address").html("<a target='_blank' href='" + resp.info_url + "'>" + resp.address + "</a>");
			$p.find(".proto_type").html("<span class='label label-" + (resp.ip6_type === "Native IPv6" ? "success" : "warning") + "'>" + resp.ip6_type + "</span>");
			if (resp.ip6_6to4) {
				$p.find(".proto_tunnel_server").html("<a target='_blank' href='http://db-ip.com/" + resp.ip6_6to4 + "'>" + resp.ip6_6to4 + "</a>");
				$p.find(".proto_tunnel_server_type").text("6to4");
				$p.find(".proto_has_tunnel_server").show();
				results.v6_native = 0;
			} else if (resp.ip6_teredo_server) {
				$p.find(".proto_tunnel_server").html("<a target='_blank' href='http://db-ip.com/" + resp.ip6_teredo_server + "'>" + resp.ip6_teredo_server + "</a>");
				$p.find(".proto_tunnel_client").html("<a target='_blank' href='http://db-ip.com/" + resp.ip6_teredo_client_host + "'>" + resp.ip6_teredo_client_host + "</a>:" + resp.ip6_teredo_client_port);
				$p.find(".proto_tunnel_server_type").text("Teredo");
				$p.find(".proto_has_tunnel_server, .proto_has_tunnel_client").show();
				results.v6_native = 0;
			} else {
				$p.find(".proto_has_tunnel_server, .proto_has_tunnel_client").hide();
				results.v6_native = 1;
			}
			$p.find(".proto_slaac").html(resp.ip6_stateless ? "<span class='label label-warning'>Yes</span>" : "<span class='label label-success'>No</span>");
			if (resp.ip6_stateless) {
				$p.find(".proto_mac_addr").text(resp.ip6_mac);
				$p.find(".proto_mac_vendor").text(resp.ip6_mac_vendor);
				$p.find(".proto_has_slaac").show();
				results.v6_no_slaac = 0;
			} else {
				$p.find(".proto_has_slaac").hide();
				results.v6_no_slaac = 1;
			}
			if (resp.hostname) {
				$p.find(".proto_hostname").html(resp.hostname);
				results.v6_hostname = 1;
			} else {
				$p.find(".proto_hostname").html("<span class='label label-warning'>None</span>");
				results.v6_hostname = 0;
			}
			$p.find(".proto_isp").html(resp.isp_name + " <a href='http://ipv6-test.com/stats/country/" + resp.country_code + "'><img src='/img/flags/" + resp.country_code + ".png' title='" + resp.country + "' /></a>");
			results.v6_support = 1;
			$p.find(".proto_icmp").html(progress_bar).find(".progress-bar").css("width", "100%");
			test_started();
			$.ajax({
				url: "http://v6.ipv6-test.com:8080",
				dataType: "jsonp",
				timeout: 5000,
				success: function(resp) {
					if (resp.status === "ok") {
						$p.find(".proto_icmp").html("<span class='label label-success'>Reachable</span>");
						results.v6_icmp = 1;
						test_finished();
					} else {
						// retry once
						$.ajax({
							url: "http://v6.ipv6-test.com:8080",
							dataType: "jsonp",
							timeout: 5000,
							success: function(resp) {
								if (resp.status === "ok") {
									$p.find(".proto_icmp").html("<span class='label label-success'>Reachable</span>");
									results.v6_icmp = 1;
								} else {
									$p.find(".proto_icmp").html("<span class='label label-warning'>Filtered</span>");
									results.v6_icmp = 0;
								}
							},
							error: function(xopt, err) {
								$p.find(".proto_icmp").html("<span class='label label-default'>Not tested</span>");
								results.v6_icmp = 0;
							},
							complete: test_finished,
						});
					}
				},
				error: function(xopt, err) {
					$p.find(".proto_icmp").html("<span class='label label-default'>Not tested</span>");
					results.v6_icmp = 0;
					test_finished();
				},
			});
		},
		error: function(xopt, err) {
			$p.find(".proto_supported").html("<span class='label label-danger' style='font-size:1em'>Not supported</span>");
			results.v6_support = 0;
			results.v6_native = 0;
			results.v6_no_slaac = 0;
			results.v6_hostname = 0;
		},
		complete: test_finished,
	});
}

function test_browser() {
	var $p = $("#browser");
	$p.find(".browser_default").html(progress_bar).find(".progress-bar").css("width", "100%");
	$p.find(".browser_fallback").empty();
	test_started();
	$.ajax({
		url: "http://v4v6.ipv6-test.com/json/defaultproto.php?PHPSESSID=fls1b7frvf823424cthep8np43",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			$p.find(".browser_default").html("<span class='label label-success' style='font-size:1em'>IPv" + resp.protocol + "</span>");
			$p.find(".browser_fallback").html(progress_bar).find(".progress-bar").css("width", "100%");
			var fb_start = (new Date()).getTime();
			test_started();
			$.ajax({
				url: "http://fallback-v" + resp.protocol + ".ipv6-test.com/json/proto.php",
				dataType: "jsonp",
				timeout: 15000,
				success: function(resp2) {
					var fb_time = Math.round(((new Date()).getTime() - fb_start) / 1000);
					var label = fb_time + " seconds";
					var lclass = "success";
					results.br_fallback = 1;
					results.br_fallback_tm = 1;
					if (fb_time > 5) {
						lclass = "warning";
						results.br_fallback_tm = 0;
					} else if (fb_time === 1) {
						label = "1 second";						
					} else {
						label = "&lt; 1 second";
					}
					$p.find(".browser_fallback").html("<span class='label label-" + lclass + "'>to IPv" + resp2.protocol + " in " + label + "</span>");
				},
				error: function(xopt, err) {
					$p.find(".browser_fallback").html("<span class='label label-danger'>No</span>");
					results.br_fallback = 0;
					results.br_fallback_tm = 0;
				},
				complete: test_finished,
			});
			if (resp.protocol === "6") {
				results.br_default_v6 = 1;
			} else {
				results.br_default_v6 = 0;
			}
		},
		error: function(xopt, err) {
			$p.find(".browser_default").html("<span class='label label-default'>Test failed</span>");
			results.br_default_v6 = 0;
			results.br_fallback = 0;
			results.br_fallback_tm = 0;
		},
		complete: test_finished,
	});
}

function test_dns() {
	var $p = $("#dns");
	$p.find(".dns_dns4_ip6, .dns_dns6_ip4, .dns_dns6_ip6").html(progress_bar).find(".progress-bar").css("width", "100%");
	test_started();
	$.ajax({
		url: "http://v6.zone4.ipv6-test.com/json/proto.php",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			if (resp.protocol === "6") {
				$p.find(".dns_dns4_ip6").html("<span class='label label-success'>Reachable</span>");
				results.dns_n4i6 = 1;
			} else {
				$p.find(".dns_dns4_ip6").html("<span class='label label-default'>Test failed</span>");
				results.dns_n4i6 = 0;
			}
		},
		error: function(xopt, err) {
			$p.find(".dns_dns4_ip6").html("<span class='label label-danger'>Unreachable</span>");
			results.dns_n4i6 = 0;
		},
		complete: test_finished,
	});
	test_started();
	$.ajax({
		url: "http://v4.zone6.ipv6-test.com/json/proto.php",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			if (resp.protocol === "4") {
				$p.find(".dns_dns6_ip4").html("<span class='label label-success'>Reachable</span>");
				results.dns_n6i4 = 1;
			} else {
				$p.find(".dns_dns6_ip4").html("<span class='label label-default'>Test failed</span>");
				results.dns_n6i4 = 0;
			}
		},
		error: function(xopt, err) {
			$p.find(".dns_dns6_ip4").html("<span class='label label-danger'>Unreachable</span>");
			results.dns_n6i4 = 0;
		},
		complete: test_finished,
	});
	test_started();
	$.ajax({
		url: "http://v6.zone6.ipv6-test.com/json/proto.php",
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			if (resp.protocol === "6") {
				$p.find(".dns_dns6_ip6").html("<span class='label label-success'>Reachable</span>");
				results.dns_n6i6 = 1;
			} else {
				$p.find(".dns_dns6_ip6").html("<span class='label label-default'>Test failed</span>");
				results.dns_n6i6 = 0;
			}
		},
		error: function(xopt, err) {
			$p.find(".dns_dns6_ip6").html("<span class='label label-danger'>Unreachable</span>");
			results.dns_n6i6 = 0;
		},
		complete: test_finished,
	});
}

var first_adv = true;
function update_score() {
	$.ajax({
		url: "http://ipv6-test.com/json/advise.php",
		data: results,
		dataType: "jsonp",
		timeout: 15000,
		success: function(resp) {
			$("#score h2").text(resp.score + " / 20");
			if (resp.score > 18) {
				pclass = "success";
			} else if (resp.score > 12) {
				pclass = "warning";
			} else {
				pclass = "danger";
			}
			$("#score .progress-bar").removeClass("active progress-striped progress-bar-success progress-bar-warning progress-bar-danger").addClass("progress-bar-" + pclass).animate({ width: (resp.score * 5) + "%"}, 2000);
			var $al = $("#advise_list");
			$al.empty();
			if (!resp.advise.length) {
				return;
			}
			$(resp.advise).each(function(k, adv) {
				var pclass = "default";
				switch (adv[2]) {
					case 0: pclass = "danger";	break;
					case 1: pclass = "warning";	break;
					case 2: pclass = "success";	break;
				}
				$al.append('<div class="panel panel-' + pclass + '"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#advise_list" href="#collapse_' + k + '">' + (k + 1) + '. ' + adv[0] + '</a></h4></div><div id="collapse_' + k + '" class="panel-collapse collapse' + (k === 0 ? ' in' : '') + '"><div class="panel-body">' + adv[1] + '</div></div></div>');
			});
			$al.find("a[data-toggle='collapse']").click(function(ev) {
				$(this).blur();
			});
			if (first_adv) {
				setTimeout(function() {
					$("#toggle_advise").popover({
						title: "Improve your score",
						content: "Click here to learn how to improve your score and enjoy a better connection to the IPv6 Internet.",
						placement: "auto top",
						trigger: "manual",
						container: "body",
					}).popover("show");
					setTimeout(function() {
						$("#toggle_advise").popover("hide");
					}, 5000);
				}, 2000);
				first_adv = false;
			}
		},
		error: function(xopt, err) {
			$("#advise").hide();
		},
	});
}

function i6tOnLoad() {
	$("#hide_noscript").css("display", "");
	$("table span.glyphicon-question-sign").each(function(k, el) {
		$(el).attr("data-title", $(el).closest("tr").find("th").text()).popover({
			placement: "auto right",
			container: "body",
		});
	});
	$("#refresh_v4").click(function(ev) {
		test_v4_conn();
		ev.preventDefault();
		return false;
	});
	$("#refresh_v6").click(function(ev) {
		test_v6_conn();
		ev.preventDefault();
		return false;
	});
	$("#refresh_browser").click(function(ev) {
		test_browser();
		ev.preventDefault();
		return false;
	});
	$("#refresh_dns").click(function(ev) {
		test_dns();
		ev.preventDefault();
		return false;
	});
	$("#toggle_advise").click(function(ev) {
		$("#toggle_advise").popover("hide");
		$("#advise").slideToggle();
		ev.preventDefault();
		return false;
	});
	test_browser();
	test_v4_conn();
	test_v6_conn();
	test_dns();
};

</script>

		</div>

		<div class="container" style="margin-top:6em">
			<footer id='footer_text' class="small">
									Copyright &copy; 2014 ipv6-test.com &nbsp;|&nbsp; <a href='bitcoin:1Ln1WDAuDfGxV4SLSsyLXrZf2Hs65haybk'>donate</a> &nbsp;|&nbsp; <a href='/contact.php'>contact</a><br />
								<span class='small'>IP geolocation API by <a href='http://db-ip.com/'>DB-IP.com</a></span>
			</footer>
		</div>

		<!-- AddThis Smart Layers BEGIN -->
		<!-- Go to http://www.addthis.com/get/smart-layers to customize -->
		<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=six0r"></script>
		<script type="text/javascript">
		  addthis.layers({
			'theme' : 'transparent',
			'share' : {
			  'position' : 'left',
			  'numPreferredServices' : 5
			}   
		  });
		</script>
		<!-- AddThis Smart Layers END -->

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.10.1.min.js"><\/script>')</script>

        <script src="/js/vendor/bootstrap.min.js"></script>

		<script src="/js/main.js"></script>
	</body>
</html>
