http://jan.rychter.com/high-voltage-power-supply-for-nixie-tube-projects
HTTP/1.1 200 OK
Date: Wed, 23 Jul 2014 09:50:54 GMT
X-ServedBy: ny1-prod6-web032.int.peer1.squarespace.net
Set-Cookie: JSESSIONID=36vuvov87x81999m4jmxtpsm;Path=/
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Set-Cookie: crumb=c3a9d52d1e;Path=/
Set-Cookie: SS_MID=29111cd6-b77e-460c-a52e-3f7f21b841a3hxyh0ygw;Path=/;Domain=.rychter.com;Expires=Sat, 20-Jul-2024 09:50:54 GMT
Accept-Ranges: bytes
Content-Type: text/html; charset=UTF-8
X-PC-AppVer: 466
Content-Encoding: gzip
X-PC-Date: Wed, 23 Jul 2014 01:43:59 GMT
X-PC-Host: 10.100.101.25
ETag: W/"754732b983122f0233216f31dd3a7950"
X-PC-Key: PALl9DmA9h8kP8vKsq8PdAj7Suo-jan-rychter
X-PC-Hit: true
Content-Length: 21099
X-ContextId: P7TdXT7J/mSnJUvZ3
X-Via: 1.1 nyc-echo07

<!doctype html>
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" itemscope itemtype="http://schema.org/Thing" lang="pl-PL">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- This is Squarespace. --><!-- jan-rychter -->
<base href="">
<meta charset="utf-8" />
<title>High Voltage Power Supply for Nixie Tube Projects — Jan Rychter</title>
<link rel="canonical" href="http://jan.rychter.com/high-voltage-power-supply-for-nixie-tube-projects/"/>
<meta property="og:site_name" content="Jan Rychter"/>
<meta property="og:title" content="High Voltage Power Supply for Nixie Tube Projects"/>
<meta property="og:url" content="http://jan.rychter.com/high-voltage-power-supply-for-nixie-tube-projects/"/>
<meta property="og:type" content="website"/>
<meta property="og:description" content="HVPSU (High-Voltage Power Supply) that generates up to 220V from a 12V 
input, for Nixie projects."/>
<meta property="og:image" content="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/?format=1000w"/>
<meta itemprop="name" content="High Voltage Power Supply for Nixie Tube Projects"/>
<meta itemprop="url" content="http://jan.rychter.com/high-voltage-power-supply-for-nixie-tube-projects/"/>
<meta itemprop="description" content="HVPSU (High-Voltage Power Supply) that generates up to 220V from a 12V 
input, for Nixie projects."/>
<meta itemprop="thumbnailUrl" content="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/?format=1000w"/>
<link rel="image_src" href="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/?format=1000w" />
<meta itemprop="image" content="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/?format=1000w"/>
<meta name="description" content="HVPSU (High-Voltage Power Supply) that generates up to 220V from a 12V 
input, for Nixie projects." />
<script type="text/javascript">SQUARESPACE_ROLLUPS = {};</script><script>(function(rollups, name) { if (!rollups[name]) { rollups[name] = {}; } rollups[name].js = ["//static.squarespace.com/universal/scripts-compressed/common-c94cf3b255208730b8ce38adc729d3d9-min.js"]; })(SQUARESPACE_ROLLUPS, 'squarespace-common');</script>
<script>(function(rollups, name) { if (!rollups[name]) { rollups[name] = {}; } rollups[name].js = ["//static.squarespace.com/universal/scripts-compressed/commerce-8576f0a50c2e9db767bfe699ba1f4cc1-min.js"]; })(SQUARESPACE_ROLLUPS, 'squarespace-commerce');</script>
<script>(function(rollups, name) { if (!rollups[name]) { rollups[name] = {}; } rollups[name].css = ["//static.squarespace.com/universal/styles-compressed/commerce-95d8c8cbe823e0f48e594d9e70476820-min.css"]; })(SQUARESPACE_ROLLUPS, 'squarespace-commerce');</script>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
<script type="text/javascript" data-sqs-type="dynamic-assets-loader">(function() {(function(a){try{if(window.top!=window&&window.top.Squarespace&&window.top.Squarespace.frameAvailable){window.top.Squarespace.frameAvailable(window,SQUARESPACE_ROLLUPS);return}}catch(d){console.error(d)}for(var c in a){if(a[c].js)for(var b=0;b<a[c].js.length;b++)document.write('<script type="text/javascript" src="'+a[c].js[b]+'">\x3c/script>');if(a[c].css)for(b=0;b<a[c].css.length;b++)document.write('<link rel="stylesheet" type="text/css" href="'+a[c].css[b]+'" />')}})(SQUARESPACE_ROLLUPS);
})();</script>
<script> Static.SQUARESPACE_CONTEXT = {"rollups":{"squarespace-audio-player":{"css":"//static.squarespace.com/universal/styles-compressed/audio-player-9c4d922041ded17d0968478a74329a53-min.css","js":"//static.squarespace.com/universal/scripts-compressed/audio-player-8723aa8f2e4e6e8e2ad9a3c93e5b884c-min.js"},"squarespace-calendar-block-renderer":{"css":"//static.squarespace.com/universal/styles-compressed/calendar-block-renderer-d41d8cd98f00b204e9800998ecf8427e-min.css","js":"//static.squarespace.com/universal/scripts-compressed/calendar-block-renderer-41a90502ab215915ef8fadcb01f99b97-min.js"},"squarespace-comments":{"css":"//static.squarespace.com/universal/styles-compressed/comments-ba941efc1141cc26332fd125f3dcd73d-min.css","js":"//static.squarespace.com/universal/scripts-compressed/comments-cc14c6a3813ce1ccf7b54af01d3c479e-min.js"},"squarespace-dialog":{"css":"//static.squarespace.com/universal/styles-compressed/dialog-f8f37c246019ebe05cba5814ae3dd9ad-min.css","js":"//static.squarespace.com/universal/scripts-compressed/dialog-fdbde50a38b0faf01d6fe044bd25616a-min.js"},"squarespace-pinterest":{"css":"//static.squarespace.com/universal/styles-compressed/pinterest-d41d8cd98f00b204e9800998ecf8427e-min.css","js":"//static.squarespace.com/universal/scripts-compressed/pinterest-e2d1ba37ad07db5eeada67621609a0d0-min.js"}},"pageType":2,"website":{"id":"4f367830cb12b0a7471a0f06","identifier":"jan-rychter","contentModifiedOn":1400571601525,"cloneable":false,"siteStatus":{},"language":"pl-PL","timeZone":"Europe/Warsaw","machineTimeZoneOffset":7200000,"timeZoneOffset":7200000,"timeZoneAbbr":"CEST","siteTitle":"Jan Rychter","siteDescription":null,"location":{"mapZoom":12.0,"mapLat":52.2062439,"mapLng":20.996325800000022,"markerLat":52.2062439,"markerLng":20.996325800000022,"addressTitle":"","addressLine1":"Bia\u0142y Kamie\u0144","addressLine2":"Warsaw, Mazowieckie","addressCountry":"Poland"},"shareButtonOptions":{"2":true,"4":true,"1":true,"7":true,"3":true},"authenticUrl":"http://jan.rychter.com","baseUrl":"http://jan.rychter.com","primaryDomain":"jan.rychter.com","socialAccounts":[{"serviceId":4,"userId":"14171015","userName":"jrychter","screenname":"Jan Rychter","addedOn":1346335279184,"profileUrl":"https://twitter.com/jrychter","iconUrl":"http://a0.twimg.com/profile_images/492640156/rychter-400-bw_normal.jpg","collectionId":"503f722fc4aa6453d4584cb7","iconEnabled":true,"serviceName":"twitter"},{"serviceId":14,"userId":"zm3Bljn2j6","userName":"jrychter","screenname":"Jan Rychter","addedOn":1346335340479,"profileUrl":"http://www.linkedin.com/in/jrychter","iconUrl":"http://m3.licdn.com/mpr/mprx/0_-ev3kzxnKoFtoB2R-fttkBa6KE3tH-SRKWTYkBg977zCcnsUYm5Docd4YXTSwzuc1wB0wr_jS8Lq","iconEnabled":true,"serviceName":"linkedin"},{"serviceId":20,"userId":"jan@rychter.com","screenname":"jan@rychter.com","addedOn":1360837033280,"profileUrl":"mailto:jan@rychter.com","iconEnabled":true,"serviceName":"email"},{"serviceId":23,"userId":"38015","userName":"jwr","screenname":"Jan Rychter","addedOn":1400751207692,"profileUrl":"https://github.com/jwr","iconUrl":"https://avatars.githubusercontent.com/u/38015?","iconEnabled":true,"serviceName":"github"}],"typekitId":"cbs1kpt","statsMigrated":true,"imageMetadataProcessingEnabled":false},"websiteSettings":{"id":"4f367830cb12b0a7471a0f07","websiteId":"4f367830cb12b0a7471a0f06","type":"Personal","subject":"Software and IT","subjects":[{"systemSubject":"tech"}],"country":"PL","state":"","markdownMode":true,"simpleLikingEnabled":true,"lastAgreedTermsOfService":2,"defaultPostFormat":"%t-%m-%y","commentLikesAllowed":true,"commentAnonAllowed":true,"commentThreaded":true,"commentApprovalRequired":false,"commentAvatarsOn":true,"commentSortType":1,"commentFlagThreshold":1,"commentFlagsAllowed":true,"commentEnableByDefault":true,"commentDisableAfterDaysDefault":0,"disqusShortname":"","homepageTitleFormat":"%s","collectionTitleFormat":"%c \u2014 %s","itemTitleFormat":"%i \u2014 %s","commentsEnabled":true,"allowSquarespacePromotion":false,"storeSettings":{"returnPolicy":null,"termsOfService":null,"privacyPolicy":null,"expressCheckout":false,"useLightCart":false,"showNoteField":false,"currenciesSupported":["USD"],"defaultCurrency":"USD","selectedCurrency":"USD","measurementStandard":1,"orderConfirmationInjectCode":"","showCustomCheckoutForm":false,"isLive":false,"stripeConnected":false,"storeState":3},"useEscapeKeyToLogin":true,"ssBadgeType":1,"ssBadgePosition":4,"ssBadgeVisibility":1,"ssBadgeDevices":1,"pinterestOverlayOptions":{"mode":"disabled","size":"small","shape":"rect","color":"white"}},"websiteCloneable":false,"collection":{"title":"High Voltage Power Supply for Nixie Tube Projects","id":"536551b5e4b0dfd7136b52cb","fullUrl":"/high-voltage-power-supply-for-nixie-tube-projects/"},"subscribed":false,"appDomain":"squarespace.com","secureDomain":"https://jan-rychter.squarespace.com","templateTweakable":true,"tweakJSON":{"aspect-ratio":"Auto","gallery-arrow-style":"Round Corners","gallery-aspect-ratio":"3:2 Standard","gallery-auto-crop":"true","gallery-autoplay":"false","gallery-design":"Slideshow","gallery-info-overlay":"Always Show","gallery-loop":"false","gallery-navigation":"Thumbnails","gallery-show-arrows":"true","gallery-transitions":"Fade","galleryArrowBackground":"rgba(34,34,34,1)","galleryArrowColor":"rgba(255,255,255,1)","galleryAutoplaySpeed":"3","galleryCircleColor":"rgba(255,255,255,1)","galleryInfoBackground":"rgba(0, 0, 0, .7)","galleryThumbnailSize":"100px","gridSize":"350px","gridSpacing":"20px","product-gallery-auto-crop":"false","product-image-auto-crop":"true"},"templateId":"4fef25bbe4b0ea9df05ac51e","pageFeatures":[1,2],"impersonatedSession":false,"isFacebookTab":false,"tzData":{"zones":[[60,"EU","CE%sT",null]],"rules":{"EU":[[1981,"max",null,"Mar","lastSun","1:00u","1:00","S"],[1996,"max",null,"Oct","lastSun","1:00u","0",null]]}}}; SquarespaceFonts.loadViaContext(); Squarespace.load(window); </script>

<script type="text/javascript" src="//use.typekit.com/cbs1kpt.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato:400,300,100,100italic,300italic,400italic,700,700italic,900,900italic"/>
<!--[if gte IE 9]> <link rel="stylesheet" type="text/css" href="//static.squarespace.com/static/sitecss/4f367830cb12b0a7471a0f06/99/4fef25bbe4b0ea9df05ac51e/5110e4a7e4b072208fa67430/1103/1401786240358/site.css?"/><![endif]-->
<!--[if lt IE 9]><script src="//static.squarespace.com/universal/scripts-thirdparty/html5/html5-shiv.js"></script><link rel="stylesheet" type="text/css" href="//static.squarespace.com/static/sitecss/4f367830cb12b0a7471a0f06/99/4fef25bbe4b0ea9df05ac51e/5110e4a7e4b072208fa67430/1103/1401786240358/site.css?&noMedia=true"/><![endif]-->
<!--[if !IE]> --> <link rel="stylesheet" type="text/css" href="//static.squarespace.com/static/sitecss/4f367830cb12b0a7471a0f06/99/4fef25bbe4b0ea9df05ac51e/5110e4a7e4b072208fa67430/1103/1401786240358/site.css?"/> <!-- <![endif]-->
<script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-812066-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script><!-- End of Squarespace Headers -->
    <script type="text/javascript" src="https://static.squarespace.com/static/ta/4fef1bbf84ae2f68a3aa65f8/1103/scripts/site.js"></script>
  </head>
  
  <body class="mobile-style-available header-alignment-left footer-alignment-split blog-sidebar-right page-borders-thin social-icons-show page-banner-full-width   hide-page-title hide-blog-author     gallery-design-slideshow aspect-ratio-auto lightbox-style-dark gallery-navigation-thumbnails gallery-info-overlay-always-show gallery-aspect-ratio-32-standard gallery-arrow-style-round-corners gallery-transitions-fade gallery-show-arrows gallery-auto-crop   product-list-titles-under product-list-alignment-center product-item-size-11-square product-image-auto-crop product-gallery-size-11-square  show-product-price show-product-item-nav product-social-sharing   event-thumbnails event-thumbnail-size-32-standard event-date-label event-date-label-time event-excerpts event-list-date event-list-time event-list-address event-icalgcal-links      opentable-style-light newsletter-style-dark small-button-style-solid small-button-shape-square medium-button-style-solid medium-button-shape-square large-button-style-solid large-button-shape-square button-style-default button-corner-style-square native-currency-code-usd collection-layout-default collection-type-page collection-536551b5e4b0dfd7136b52cb view-list site-title" id="collection-536551b5e4b0dfd7136b52cb">

    <div id="canvasWrapper">
    	<div id="canvas">

    		<header id="header">
    			<div id="logo" data-content-field="site-title">
            
              <h1 class="logo"><a href="/">Jan Rychter</a></h1>
              
            
          </div>
          <div id="topNav"  data-content-field="navigation-navigation">

  <nav class="main-nav dropdown-hover">
    <ul id="siteNav">
      <li class="toggle"><a href="#mobileNav" id="mobile-show-nav" class="icon-list"></a></li>
      

          <li class="page-collection">

          

            
              
                <a href="/">Home</a>
              
            

            

          

          </li>

      

          <li class="blog-collection">

          

            
              
                <a href="/blog/">Blog [PL]</a>
              
            

            

          

          </li>

      

          <li class="blog-collection">

          

            
              
                <a href="/enblog/">Blog [EN]</a>
              
            

            

          

          </li>

      
    </ul>

    <ul id="mobileNav">
      <li class="toggle"><a href="#canvas" id="mobile-close-nav" class="icon-list"></a></li>
      

          

            <li class="page-collection">

            
              <a href="/">Home</a>
            

            

            </li>

          

      

          

            <li class="blog-collection">

            
              <a href="/blog/">Blog [PL]</a>
            

            

            </li>

          

      

          

            <li class="blog-collection">

            
              <a href="/enblog/">Blog [EN]</a>
            

            

            </li>

          

      
    </ul>

  </nav>

</div>


    		</header>
        <script>
          Y.use('squarespace-ui-base', function(Y) {
            Y.one("h1.logo").plug(Y.Squarespace.TextShrink, {
              parentEl: Y.one('#header')
            });
          });
        </script>

        

          
          <div class="page-divider"></div>
          <div id="top">
            <p class="page-title">High Voltage Power Supply for Nixie Tube Projects</p>
            <div class="page-description"><div class="wrapper"><p>HVPSU (High-Voltage Power Supply) that generates up to 220V from a 12V input, for Nixie projects.</p></div></div>
          </div>
          

          

          

        

    		<section id="page" role="main" data-content-field="main-content">
    		  <div class="sqs-layout sqs-grid-12 columns-12" data-type="page" data-updated-on="1399233985270" id="page-536551b5e4b0dfd7136b52cb"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-66280ae72981634260dd"><div class="sqs-block-content"><h1 id="highvoltagepowersupplyfornixietubeprojects">High Voltage Power Supply for Nixie Tube Projects</h1><h2 id="overview">Overview</h2></div></div><div class="sqs-block image-block sqs-block-image sqs-col-5 span-5 float float-right" data-block-type="5" id="block-yui_3_10_1_1_1399148972305_10989"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:1280.0px;">
			
				<div style="padding-bottom:100.0%;" class="image-block-wrapper   has-aspect-ratio" data-description="&lt;p&gt;A completed unit. You can use a smaller inductor, but I found the toroidal to have excellent parameters.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/"  alt="A completed unit. You can use a smaller inductor, but I found the toroidal to have excellent parameters."  /></noscript><img class="thumb-image" alt="A completed unit. You can use a smaller inductor, but I found the toroidal to have excellent parameters." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536551fce4b01e9923eb6032/1399149073021/" data-image-dimensions="1280x1280" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="536551fce4b01e9923eb6032" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>A completed unit. You can use a smaller inductor, but I found the toroidal to have excellent parameters.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399148972305_16302"><div class="sqs-block-content"><p>This project is a HVPSU (High-Voltage Power Supply) that generates up to 220V from a 12V input. In addition to that, it also provides 2*Vout (so, up to 440V, for dekatrons), and two outputs for powering digital logic: 5V and 3.3V. The primary HV boost circuit reaches 88% efficiency when going from 12V to 185V at 55mA, with a 3% output ripple.</p>

<p>I designed it because I couldn't find anything that would make sense for my Nixie projects. There are plenty of tiny power supply modules available on eBay, but most of them end up being impractical: no 3.3V (for my microcontroller) and 5V (for my 74141 nixie drivers), no mounting holes, no >400V output for powering dekatrons. Some supplies make a token gesture towards practicality by sticking a 7805 on the same board, but you quickly find out that the current draw of 6x74141 is enough to require a large heat sink on a 12V-powered 7805 (one 74141 consumes 12.5mA!). This means that instead of a single-board power supply you end up routing your input power all over the place, implementing your power supply in several places.</p>

<p>I wanted to have something versatile enough so that I could use it in a number of projects: with nixies, dekatrons, other tubes, VFDs, phone ringers, etc. I also wanted it to fit on a 5x5cm PCB, so that I can order 10 PCBs for $10 at <a href="http://imall.iteadstudio.com/open-pcb/pcb-prototyping.html">iteadstudio</a>.</p></div></div><div class="sqs-block image-block sqs-block-image sqs-col-5 span-5 float float-right" data-block-type="5" id="block-yui_3_10_1_1_1399148972305_19573"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:2130.0px;">
			
				<div style="padding-bottom:111.2676010131836%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;PCB layout. Note the careful ground plane handling.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365524ee4b0b3f114a6eab3/1399149223105/"  alt="PCB layout. Note the careful ground plane handling."  /></noscript><img class="thumb-image" alt="PCB layout. Note the careful ground plane handling." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365524ee4b0b3f114a6eab3/1399149223105/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365524ee4b0b3f114a6eab3/1399149223105/" data-image-dimensions="2130x2370" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5365524ee4b0b3f114a6eab3" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>PCB layout. Note the careful ground plane handling.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399149386080_14258"><div class="sqs-block-content">
<p>The version I'm posting online is not perfect, but works quite well in a number of my projects. I decided I'd rather publish it as it is now rather than keep it locked forever.</p><p>The circuit and PCB you see are the result of multiple iterations. I started out with a design based on <a href="http://datasheets.maximintegrated.com/en/ds/MAX1771.pdf">MAX1771</a>, which turned out to have stability problems, mostly due to EMI on the feedback pin. I then went through seven board designs, trying to make it work. I ended up with a design that mostly worked, but exhibited uncontrolled behavior in some conditions (load transients, overcurrent, EMI). I finally got tired of the <a href="http://datasheets.maximintegrated.com/en/ds/MAX1771.pdf">MAX1771</a> chip and decided to look for another solution.</p><p>I chose the <a href="http://www.ti.com/product/tps40210">TPS40210</a> from Texas Instruments, which seemed to be a solid performer in high-voltage boost applications, was easily available, not too expensive. The existence of an automotive-grade version also means that the chip won't disappear anytime soon. I went through three board revisions with the <a href="http://www.ti.com/product/tps40210">TPS40210</a>, which were mostly about shrinking the design and adding the <a href="http://www.ti.com/product/tps62160">TPS62160</a> buck converter instead of a 7805 to produce 5V.</p>
<p>In the process I learned a lot and discovered that there is a lot of stuff about boost converters that I didn't even know I didn't know. Here are a few examples:</p>
<ul>
<li>Loop stability: I had no idea why it was an issue or how to design loop compensation (TI's <a href="http://www.ti.com/tool/switcherpro">SwitcherPro</a> is really helpful).</li>
<li>CCM vs DCM and transitions inbetween.</li>
<li>Current-mode control sub-harmonic instability in continuous conduction mode.</li>
<li>RC snubber: do <em>you</em> know about parasitic ringing on the switching node? That ringing that your scope probably won't show, because it's above 500MHz?</li>
</ul></div></div><div class="sqs-block image-block sqs-block-image sqs-col-5 span-5 float float-right" data-block-type="5" id="block-yui_3_10_1_1_1399192225430_13961"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:1280.0px;">
			
				<div style="padding-bottom:100.0%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;One of the units with SMD components mounted, fresh from the oven.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fad7e4b03a1661ab8841/1399192283396/"  alt="One of the units with SMD components mounted, fresh from the oven."  /></noscript><img class="thumb-image" alt="One of the units with SMD components mounted, fresh from the oven." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fad7e4b03a1661ab8841/1399192283396/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fad7e4b03a1661ab8841/1399192283396/" data-image-dimensions="1280x1280" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5365fad7e4b03a1661ab8841" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>One of the units with SMD components mounted, fresh from the oven.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399192652420_9473"><div class="sqs-block-content">
<p>I now know slightly more, but the circuit certainly isn't perfect. I don't even have the equipment to measure some of its properties, so I have to leave it as it is.</p><p>There are two principal reasons for making this available as an open-hardware project:</p><ul>
<li>I learned a lot by studying the designs of others, and I felt I owe the community something in return (Nick de Smith's <a href="http://desmith.net/NMdS/Electronics/NixiePSU.html">Nixie HV Switching PSU</a> page was especially helpful).</li>
<li>Most Nixie PSU designs I saw online are based on the <a href="http://datasheets.maximintegrated.com/en/ds/MAX1771.pdf">MAX1771</a>, and apart from people hacking crude 555 supplies, there seems to be little variation. I thought an alternative should be out there.</li>
</ul>
<h2 id="features">Features:</h2><ul>
<li>Generates 4 voltages from 12V input:
<ul><li>Vout: up to 220V at up to 80mA, 2-3% voltage ripple</li>
<li>2*Vout (optional): up to 440V at up to 30mA</li>
<li>5V at up to 1A at ~85% efficiency for older digital logic such as 74141 Nixie drivers (compare to about 40% efficiency if a 7805 is used)</li>
<li>3.3V for modern digital logic (microcontrollers, etc)</li></ul></li>
<li>High-voltage DC-DC converter can be shut down digitally to save power</li>
<li>Can be used with many different power inductors, depending on desired output power:
<ul><li>SMD 12.5x12.5mm</li>
<li>THT vertical barrel type, rasters of 5mm, 8mm, 11mm</li>
<li>THT vertical toroidal type, 8mm raster, up to 23.5x11mm</li></ul></li>
<li>Known &amp; fixed switching frequency (50kHz)</li>
<li>Nominal input is 12V, can be up to 16V</li>
<li>Safety features: overcurrent protection, thermal shutdown, slow-start.</li>
</ul></div></div><div class="sqs-block image-block sqs-block-image sqs-col-5 span-5 float float-right" data-block-type="5" id="block-yui_3_10_1_1_1399192516380_14596"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:1223.0px;">
			
				<div style="padding-bottom:104.6606674194336%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;Another completed board.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fbf0e4b0e77173caee60/1399192576906/"  alt="Another completed board."  /></noscript><img class="thumb-image" alt="Another completed board." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fbf0e4b0e77173caee60/1399192576906/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5365fbf0e4b0e77173caee60/1399192576906/" data-image-dimensions="1223x1280" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5365fbf0e4b0e77173caee60" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Another completed board.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399192681760_9157"><div class="sqs-block-content"><h2 id="downloadsreleasenotesandlicensing">Downloads, Release Notes and Licensing</h2>

<ul>
<li><a href="http://screech.rychter.com/files/HV%20PSU%202.3%20Schematic.pdf">Schematic as a PDF file</a></li>
<li>A <a href="http://screech.rychter.com/files/HV%20PSU%202.3-2014-05-03.zip">zipfile</a> containing the schematic, PCB, Eagle .sch and .brd files, and Gerbers prepared for manufacturing at <a href="http://imall.iteadstudio.com/open-pcb/pcb-prototyping.html">iteadstudio</a>.</li>
<li>There is also a <a href="http://screech.rychter.com/files/HV%20PSU%202.3%20Partlist.txt">partlist</a>, as generated by Eagle. Not a real BOM, but at least you'll know what to need and what resistor sizes to use.</li>
</ul>

<p>Version 2.2 is what I use in all my projects. Version 2.3 has several tiny fixes: adjusted position of mounting holes, added comments in the schematic, but is otherwise identical to 2.2.</p>

<p>I wanted to pick an Open-Source Hardware license, but couldn't find one. There is lots of talk about Open-Source Hardware, but when you actually want to open-source something, it turns out it isn't easy.</p>

<p>So, to make it clear: this design (this includes the schematic, PCB design, and the output gerbers) is available for anyone to do whatever they want with it. Take it, modify it, make money with it, heck — even sign your name on it if that fits your moral guidelines. I'll be glad if you pay me (one doesn't pay one's mortgage or buy oscilloscopes with good intentions), but you don't have to.</p>

<p>If you do want to pay/donate, here's a Bitcoin address to use: <a href="bitcoin:1KsdTmuDBNaEqSBHd4HNnTCHhb5FeweCDC?label=HV%20PSU%20Donations">1KsdTmuDBNaEqSBHd4HNnTCHhb5FeweCDC</a>, here's one for Litecoin: LbHDL3HGeMTjVCKF5JCAh2gCesoNGo8oSF, and here's one for Dogecoin (because you should never take yourself too seriously): DNkTgZzFSrnpdecaXZWfZKytmaSL8V3nGY. Should you (for some unfathomable reason) want to pay significant amounts of money, contact me for an invoice and account information. Donations will be put to good use (buying a decent scope is first on the list).</p></div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399211258123_17452"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:2166.0px;">
			
				<div style="padding-bottom:54.8476448059082%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;The circuit schematic (you might be better of with the downloadable PDF version, though). Note that some components might look strange because I wanted to have multiple-footprint options.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536647e2e4b0124f2402029e/1399212016051/"  alt="The circuit schematic (you might be better of with the downloadable PDF version, though). Note that some components might look strange because I wanted to have multiple-footprint options."  /></noscript><img class="thumb-image" alt="The circuit schematic (you might be better of with the downloadable PDF version, though). Note that some components might look strange because I wanted to have multiple-footprint options." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536647e2e4b0124f2402029e/1399212016051/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/536647e2e4b0124f2402029e/1399212016051/" data-image-dimensions="2166x1188" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="536647e2e4b0124f2402029e" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>The circuit schematic (you might be better of with the downloadable PDF version, though). Note that some components might look strange because I wanted to have multiple-footprint options.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399211258123_17938"><div class="sqs-block-content"><h2 id="designassumptions">Design assumptions:</h2><ul>
<li>Wide range of output voltages for various HV projects: from 60V for VFD displays to 440V for dekatrons</li>
<li>Wide range of output currents: from single mA up to 80mA at 180V for large numbers of nixies</li>
<li>Should also supply 5V and 3.3V for digital logic with good efficiency</li>
<li>Good transient response for nixie multiplexing, PWM dimming, or IN-9/IN-13 bargraph displays</li>
<li>Stable behavior from no load to maximum load, over entire supported Vin range</li>
<li>Fixed switching frequency so that noise/interference is more predictable</li>
<li>Must tolerate various inductors, as those are hard to get and some types might be expensive in parts of the world</li>
<li>Must not use a transformer, for the same reasons</li>
<li>Should accomodate slight variation in components where possible</li>
<li>Should be reasonably quiet: EMI should be limited, predictable and well-behaved</li>
</ul><p>Things I didn't care too much about:</p><ul>
<li>Board size: you could make the board much smaller by removing optional areas, 5V and 3.3V voltage generation, ARK connector for HV output, 12V DC input connector, and mounting holes. But if you do that you end up with a cute, but completely impractical board. There is no point in making the PSU tiny, as Nixies are not small. You normally have lots of room.</li>
<li>Cost: actually, I did care about cost. But anything listed in the "design assumptions" above had precedence. Using a 7805 instead of the <a href="http://www.ti.com/product/tps62160">TPS62160</a> is definitely cheaper, but you end up with lots of dissipated heat/power and a large heatsink. Same goes for the FET: yes, you could use an IRF644, but efficiency and EMI would suffer.</li>
</ul><p>All of the following graphs and calculations assume a switching frequency of 50kHz, Vin=12V, Vout=180V, RdsON=100mΩ and L=47µH, unless stated otherwise.</p><h2 id="modifications">Modifications</h2><p>In general, before you modify anything, I'd suggest reading the datasheet for the <a href="http://www.ti.com/product/tps40210">TPS40210</a> carefully.</p><p>Some aspects of the design are easily adjustable:</p><ul>
<li>To adjust the primary output voltage, change R1-1 and R1-2. These, in conjunction with R2-1 and R2-2 form a divider that decides what the output voltage will be.</li>
<li>If you don't need some of the output voltages, just don't populate the corresponding part of the board. For example, if you don't use dekatrons at more than 400V, don't populate C8, D2, D3 and C2.</li>
<li>If you don't need 5V, but do need 3.3V, change the resistor divider next to the <a href="http://www.ti.com/product/tps62160">TPS62160</a> (R8/R9) so that the chip generates 3.3V directly, and leave out the 1117 stabilizer.</li>
<li>C20 and C14 are optional and I don't actually use them in my builds. The space is there so that you can experiment and if you need them, you can add them.</li>
</ul><h2 id="designnotes">Design Notes</h2><h3 id="inductors">Inductors</h3><p>The power inductor you choose is the single most important factor that affects the efficiency. I experimented with many inductors, finally settling on a large toroidal (either DTMSS-20-0,047/6,0-V or DTMSS-20-0,068/4,0-V from <a href="http://feryster.pl/">Feryster</a>). If your design is space-constrained, use a shielded SMD inductor like EPCOS B82477P4473M000 (47µH, 2.8A) or Coiltronics DRA127-470-R (47µH, 2.3A), but efficiency will suffer, and you will be limited with your output current.</p><p>Take care to read about peak inductor current in the <a href="http://www.ti.com/product/tps40210">TPS40210</a> datasheet if you want to go to higher output currents. If you're powering 6 IN-12 Nixies, you only need about 15mA, but 6xIN-18 will put you at almost 40mA max current.</p><p>The peak inductor current in a boost converter depends mostly on input voltage, output voltage, switching frequency and inductor value. To understand the peak inductor current, I made the following graph. This is the peak inductor current for Vin=12V, Vout=180V, plotted for various inductor values and a range of output currents:</p></div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399210110044_10596"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:800.0px;">
			
				<div style="padding-bottom:101.125%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;Peak inductor current as a function of L and Iout, for Vout=180V. Using a log scale for Iout would make the relationship linear, but then the graph wouldn't look so cool. Also, you normally don't think of the output current in logarithmic terms.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53664097e4b02ae061805431/1399210138156/"  alt="Peak inductor current as a function of L and Iout, for Vout=180V. Using a log scale for Iout would make the relationship linear, but then the graph wouldn't look so cool. Also, you normally don't think of the output current in logarithmic terms."  /></noscript><img class="thumb-image" alt="Peak inductor current as a function of L and Iout, for Vout=180V. Using a log scale for Iout would make the relationship linear, but then the graph wouldn't look so cool. Also, you normally don't think of the output current in logarithmic terms." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53664097e4b02ae061805431/1399210138156/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53664097e4b02ae061805431/1399210138156/" data-image-dimensions="800x809" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="53664097e4b02ae061805431" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Peak inductor current as a function of L and Iout, for Vout=180V. Using a log scale for Iout would make the relationship linear, but then the graph wouldn't look so cool. Also, you normally don't think of the output current in logarithmic terms.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399210110044_11129"><div class="sqs-block-content"><p>As an example, with a 47µH inductor and 15mA output current, the peak inductor current is between 1.5A and 2A, so if we choose an inductor with a saturation current of 2A, we should be fine.</p><p>I would not advise using an unshielded inductor, unless it's a toroidal one. The electromagnetic field will be quite strong and you might have problems with EMI.</p><p>As for L2, it should be a shielded 2.2µH SMD-mounted inductor. I used a generic MCSDRH73B-2R2MHF from Farnell (7.3mm x 7.3mm). The footprint is designed to be very flexible, with large pads that can accomodate almost any 2.2µH SMD coil up to 7.5mm x 9mm. See the <a href="http://www.ti.com/product/tps62160">TPS62160</a> datasheet for details on the peak inductor current.</p><h3 id="currentsenseresistor">Current Sense Resistor</h3><p>You will notice that there is space for two current sense resistors (R5-1 and R5-2). There is a practical reason for it: it will often be easier and cheaper to obtain two lower-power resistors then a single large-power one. Also, the larger power resistors come in non-standard packages.</p><p>As an example, instead of using a single 50mΩ resistor, I can use two 1206 100mΩ 0.33W resistors connected in parallel.</p><p>The current sense resistor actually serves two purposes: one, as the name implies, is to sense and measure the current flowing through the inductor and MOSFET. The second purpose is to provide overcurrent protection. The exact formula to compute the appropriate value of Rsense should be taken from the <a href="http://www.ti.com/product/tps40210">TPS40210</a> datasheet, but the graphs should give you a better idea of the tradeoffs and reasonable values.</p></div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399192727130_8807"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:800.0px;">
			
				<div style="padding-bottom:101.5%;" class="image-block-wrapper lightbox  " data-description="&lt;p&gt;Overcurrent resistor values in mΩ as a function of L and overcurrent limit. The cross-section at L=47µH is shown on the next graph.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f1ae4b0bb236657d1ba/1399209763697/overcurrent-resistor-l-i.png"  alt="Overcurrent resistor values in mΩ as a function of L and overcurrent limit. The cross-section at L=47µH is shown on the next graph."  /></noscript><img class="thumb-image" alt="Overcurrent resistor values in mΩ as a function of L and overcurrent limit. The cross-section at L=47µH is shown on the next graph." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f1ae4b0bb236657d1ba/1399209763697/overcurrent-resistor-l-i.png" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f1ae4b0bb236657d1ba/1399209763697/overcurrent-resistor-l-i.png" data-image-dimensions="800x812" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="53663f1ae4b0bb236657d1ba" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Overcurrent resistor values in mΩ as a function of L and overcurrent limit. The cross-section at L=47µH is shown on the next graph.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399192727130_14526"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:800.0px;">
			
				<div style="padding-bottom:67.0%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;Overcurrent protection Risns value in mΩ for L=47µH, as a function of overcurrent limit in mA. My schematic has Risns (R5) equal to 50mΩ, so given that I generate 180V and use a 47µH inductor, the limit is 40mA.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f55e4b0bb236657d1e9/1399209814365/overcurrent-resistor-ioutoc.png"  alt="Overcurrent protection Risns value in mΩ for L=47µH, as a function of overcurrent limit in mA. My schematic has Risns (R5) equal to 50mΩ, so given that I generate 180V and use a 47µH inductor, the limit is 40mA."  /></noscript><img class="thumb-image" alt="Overcurrent protection Risns value in mΩ for L=47µH, as a function of overcurrent limit in mA. My schematic has Risns (R5) equal to 50mΩ, so given that I generate 180V and use a 47µH inductor, the limit is 40mA." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f55e4b0bb236657d1e9/1399209814365/overcurrent-resistor-ioutoc.png" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f55e4b0bb236657d1e9/1399209814365/overcurrent-resistor-ioutoc.png" data-image-dimensions="800x536" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="53663f55e4b0bb236657d1e9" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Overcurrent protection Risns value in mΩ for L=47µH, as a function of overcurrent limit in mA. My schematic has Risns (R5) equal to 50mΩ, so given that I generate 180V and use a 47µH inductor, the limit is 40mA.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399192727130_12089"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:800.0px;">
			
				<div style="padding-bottom:102.125%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;Another way to look at reasonable Risns (R5) values. The numbers in the graph represent the overcurrent limit in mA. The range of reasonable values is limited, as there is no point in going above 100mA. Also, as you can see, using log-log scales makes the relationship linear.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f38e4b0bb236657d1d8/1399209787571/"  alt="Another way to look at reasonable Risns (R5) values. The numbers in the graph represent the overcurrent limit in mA. The range of reasonable values is limited, as there is no point in going above 100mA. Also, as you can see, using log-log scales makes the relationship linear."  /></noscript><img class="thumb-image" alt="Another way to look at reasonable Risns (R5) values. The numbers in the graph represent the overcurrent limit in mA. The range of reasonable values is limited, as there is no point in going above 100mA. Also, as you can see, using log-log scales makes the relationship linear." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f38e4b0bb236657d1d8/1399209787571/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53663f38e4b0bb236657d1d8/1399209787571/" data-image-dimensions="800x817" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="53663f38e4b0bb236657d1d8" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Another way to look at reasonable Risns (R5) values. The numbers in the graph represent the overcurrent limit in mA. The range of reasonable values is limited, as there is no point in going above 100mA. Also, as you can see, using log-log scales makes the relationship linear.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399192727130_9365"><div class="sqs-block-content"><h3 id="switchingmosfet">Switching MOSFET</h3>

<p>I don't recommend changing the switching MOSFET (IRFH5025TR2PBF). It has been carefully chosen and has excellent parameters. It barely even gets warm in normal operation, and the PCB provides adequate heatsinking. The only worrying thing is its VdsMAX of 250V, which leaves little headroom if you're generating 180-200V and allow for inductor spikes. The RdsON of 100mΩ is very good for a 250V MOSFET (that's 3x better than the commonly used IRF644!).</p>

<p>In projects that have lower voltage requirements (VFD, ringers, etc) you might consider the IRFH5207TR2PBF. It has the same footprint, VdsMAX of 75V and RdsON of just 9.6mΩ. If you're going for 60V output, this could be an option.</p>

<h3 id="maximumoutputcurrent">Maximum Output Current</h3>

<p>So, what is the maximum output current for this design?</p>

<p>This is something I can't really answer. I wasn't able to hit the limit (I tested up to 80mA at 185V). The practical limitation is the inductor you choose and its maximum saturation current (see the graph showing the peak inductor current). For 100mA output at 180V you will be hitting 3.5A-4A with a 47µH inductor. The IRFH5025 MOSFET can handle up to 32A and the PCB should not have any problems dissipating the heat, but you will need a large toroidal inductor and you might run into other issues, such as input voltage dropping, insufficient input capacitance, or (if you increase the input caps) large inrush current at power-on. I also don't know how a generic output capacitor will behave with large currents: it might heat up unacceptably. So I can't really answer that question, and I'd be curious to find out myself.</p>

<h3 id="operatingfrequency">Operating Frequency</h3>

<p>The PSU operates at around 50kHz (actually, sometimes even slightly below that, but don't tell anyone, as the <a href="http://www.ti.com/product/tps40210">TPS40210</a> specifications mention 50kHz as the lower limit). Normally one would use a higher frequency, but with such a high output voltage the MOSFET gate charge becomes a significant source of switching losses. My measurements showed that going above 50kHz does indeed quickly lead to a drop in efficiency, losing already ~5% at 76kHz.</p>

<h3 id="voltagedoubler">Voltage Doubler</h3>

<p>C8, D2, D3 and C2 form a voltage doubler that provides 2x Vout. You may leave this area unpopulated if you don't need it. Be aware that this output is unregulated — it will follow Vout, but you will get at least double the ripple, and it won't respond to load changes as well as Vout. It should not be used as a primary output. It's fine for biasing dekatrons, but don't expect much more from it.</p>

<h3 id="splitresistors">Split Resistors</h3>

<p>You might have noticed that R2 is split into two 0805 resistors. Similarly, R1 also has two places reserved (0603 this time). There main reason for doing this is that R2 will have nearly the full output voltage across it. To avoid getting high-voltage rated resistors, we use two resistors in series, thus dropping the voltage across each resistor by half. I also used 0805 resistors here, because they will likely have a higher voltage rating.</p>

<p>In practice, you won't even get the voltage rating for most cheap resistors, so this is a guessing game — but we are stacking the odds in our favor.</p>

<p>As for R1, the reason for splitting it is so that you can get the resistance you need from the components you already have.</p>

<h3 id="outputcapacitor">Output Capacitor</h3>

<p>C1, the output capacitor for the boost converter, forms an integral part of the converter loop. Normally, one would carefully pick a low-ESR capacitor, design loop compensation based on that particular part, and measure the loop response with a network analyzer using a transformer-injected signal. But this being a hobby design I have no such luxuries. The output cap has to be rated at (at least) 250V, which really limits the choice, especially if you also want the price to be reasonable. And it is likely that every build of this design will use a different cap in this place. So I've made certain assumptions, which should hold for reasonable 4.7µF/250V electrolytics. If possible, use a cap with lower ESR, but overall it should make little difference.</p>

<p>C16 is a filter capacitor. It is optional, but very nicely filters the output ripple, so I use it in every build. It's a 100nF MKT cap in a rectangular-footprint package and the PCB allows for two raster sizes: 10mm and 15mm.</p>

<h3 id="potentiometerorratherthelackofit">Potentiometer (or rather the lack of it)</h3>

<p>Note that there is no potentiometer, so the output voltage is not adjustable. This is not by accident. I found that vertically-mounted precision pots (and you do need a multi-turn precision pot for any meaningful adjustment) make great antennas for picking up EMI from the primary inductor. The feedback pin is very sensitive to noise, so any interference will make the circuit unstable or prevent it from working at all.</p>

<p>I decided that one usually builds a PSU for a specific project with a fixed voltage anyway, and in the worst case it isn't that difficult to desolder and replace R1/R2.</p>

<h3 id="casevariants">Case Variants</h3>

<p>The primary inductor and some capacitors have space reserved for multiple case variants. This is because these components are difficult to get in standardized packaging and it's likely people will use many variants. The footprints might look strange (and the double inductor symbol in the schematic looks weird, too), but it's very practical.</p>

<h3 id="snubber">Snubber</h3>

<p>The RC snubber is formed by C11 and R7. I have no way of testing whether it does the job correctly, as I only have a 100MHz scope. I followed the recommendations from Texas Instruments (the Switcher Pro application), and I can only hope it helps.</p>

<h3 id="enablepin">Enable Pin</h3>

<p>Do not forget to place a jumper on JP1. If the enable pin is left floating, you might end up with the boost controller disabling itself. <a href="http://www.ti.com/product/tps40210">TPS40210</a> has an internal pulldown resistor on the enable pin, but it is very weak (1.1MΩ).</p>

<p>If you control the enable pin with external digital circuitry, pulling the enable pin above 1.2V shuts down the boost controller. This will not shut down your digital supplies (5V and 3.3V), however.</p>

<p>Because of the slow-start feature of the <a href="http://www.ti.com/product/tps40210">TPS40210</a> this input isn't really amenable to PWM.</p>

<h3 id="continuousconductionmodevsdiscontinuousconductionmode">Continuous Conduction Mode vs Discontinuous Conduction Mode</h3>

<p>A circuit with an inductor can operate in one of two primary modes: CCM (Continuous Conduction) or DCM (Discontinuous Conduction). The difference is that in CCM current flows through the inductor all the time, while in DCM current falls to zero during a part of the switching cycle.</p>

<p>In general, it is preferable to be in CCM, as the peak current will be smaller, you will place less stress on the components, and because of smaller peak currents, EMI will be less of a problem. However, staying in CCM requires maintaining certain output current. If your output current falls, you will end up in DCM. There are a number of variables that affect whether you are in CCM or DCM, so I made some graphs to better visualize and understand the transition boundaries (see below).</p>

<p>All datasheets for boost controllers will provide different sets of calculations for CCM and DCM. I have never seen a discussion of CCM/DCM transitions and it seems to me this topic is generally avoided. In our case, it is difficult to avoid it, because we do not always know what the actual load current will be, and if you use PWM for Nixie brightness control, your output load will vary wildly.</p>

<p>An additional problem that occurs specifically in current-mode controllers operating in CCM is sub-harmonic instability (see pages 15 and 16 of the <a href="http://www.ti.com/product/tps40210">TPS40210</a> datasheet). While I managed to understand the reason for this problem, I never understood what the solution is. And because in the case of this circuit the maximum allowable Rsense (R5) value to avoid instability is 6mΩ, and my experiments showed that I am indeed getting unstable behavior (controller skipping cycles, lowering efficiency), I decided to design the circuit to stay in DCM all the time.</p>

<p>Here is a graph showing the transition boundaries between DCM and CCM at 50kHz, for Vout=180V, for various inductor values (given in µH):</p></div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399210110044_20329"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:800.0px;">
			
				<div style="padding-bottom:90.875%;" class="image-block-wrapper lightbox  has-aspect-ratio" data-description="&lt;p&gt;For a given curve corresponding to a certain inductance value, any combination of Iout and Vin to the upper-left of the curve means the converter will be in discontinuous-conduction mode, while anything to the lower-right of the curve means the converter will be in continuous-conduction mode. Given that we encounter stability problems in CCM, we want to stay above the curve at all times.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366414be4b08a77bcea80bc/1399210318931/"  alt="For a given curve corresponding to a certain inductance value, any combination of Iout and Vin to the upper-left of the curve means the converter will be in discontinuous-conduction mode, while anything to the lower-right of the curve means the converter will be in continuous-conduction mode. Given that we encounter stability problems in CCM, we want to stay above the curve at all times."  /></noscript><img class="thumb-image" alt="For a given curve corresponding to a certain inductance value, any combination of Iout and Vin to the upper-left of the curve means the converter will be in discontinuous-conduction mode, while anything to the lower-right of the curve means the converter will be in continuous-conduction mode. Given that we encounter stability problems in CCM, we want to stay above the curve at all times." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366414be4b08a77bcea80bc/1399210318931/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366414be4b08a77bcea80bc/1399210318931/" data-image-dimensions="800x727" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5366414be4b08a77bcea80bc" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>For a given curve corresponding to a certain inductance value, any combination of Iout and Vin to the upper-left of the curve means the converter will be in discontinuous-conduction mode, while anything to the lower-right of the curve means the converter will be in continuous-conduction mode. Given that we encounter stability problems in CCM, we want to stay above the curve at all times.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399210110044_20574"><div class="sqs-block-content"><p>Note for example that with a common 100µH inductor size, if one pulls 60mA from the output, Vin falling below 11V will make the circuit go into CCM. I discovered it the hard way: my crappy Chinese power supply indicated 12V, but it turned out to be just chest-thumping, as under load the voltage fell below 11V, even though the display said 12V. Don't trust your power supply.</p>

<p>To better understand the transition boundaries between DCM and CCM, take a look at the following graph/animation. It illustrates transition boundaries between DCM and CCM at 50kHz, for various inductor values and for various Vout values. Note that the bigger your output voltage and output current are, the more likely you are to end up in CCM:</p></div></div><div class="sqs-block image-block sqs-block-image" data-block-type="5" id="block-yui_3_10_1_1_1399210110044_23462"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:742.0px;">
			
				<div style="padding-bottom:87.87062072753906%;" class="image-block-wrapper   has-aspect-ratio" data-description="&lt;p&gt;Note that as the output voltage goes up, the curves shift up as well. Therefore, to stay in DCM all the time, you need to pick a suitably low inductance value.&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366416ee4b08a77bcea80e0/1399210510342/"  alt="Note that as the output voltage goes up, the curves shift up as well. Therefore, to stay in DCM all the time, you need to pick a suitably low inductance value."  /></noscript><img class="thumb-image" alt="Note that as the output voltage goes up, the curves shift up as well. Therefore, to stay in DCM all the time, you need to pick a suitably low inductance value." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366416ee4b08a77bcea80e0/1399210510342/" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/5366416ee4b08a77bcea80e0/1399210510342/" data-image-dimensions="742x652" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="5366416ee4b08a77bcea80e0" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>Note that as the output voltage goes up, the curves shift up as well. Therefore, to stay in DCM all the time, you need to pick a suitably low inductance value.</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399210110044_23676"><div class="sqs-block-content"><p>I decided to go with a 47µH inductor. That value means that even if my input voltage falls to 11V, I can safely go up to 220V at 80mA without entering CCM territory (and thus encountering instability).</p>

<h3 id="thingstodo">Things To Do</h3>

<p>There are things I would like to do, but lack either the time, or equipment:</p>

<ul>
<li>Use a network analyzer to measure the loop performance (I don't have access to a network analyzer).</li>
<li>Measure transient response using a load tester (building a load tester capable of sinking 80mA at 220V is a project in itself).</li>
<li>Perform exact efficiency measurements (mine are just approximations).</li>
<li>Figure out a practical solution to the current-mode control instability in CCM, which would allow going into CCM (if anybody understands this, I'd be glad to learn!).</li>
<li>Measure the RC snubber and possibly improve the component choice.</li>
</ul>

<p>For now, I'm leaving the design as it is — it works well enough for me.</p>

<h2 id="thanksto">Thanks To</h2></div></div><div class="sqs-block image-block sqs-block-image sqs-col-6 span-6 float float-right" data-block-type="5" id="block-yui_3_10_1_1_1399221166517_15834"><div class="sqs-block-content">
	<div class="image-block-outer-wrapper layout-caption-below ">
	
		<div class="intrinsic" style="max-width:1280.0px;">
			
				<div style="padding-bottom:59.140621185302734%;" class="image-block-wrapper   " data-description="&lt;p&gt;A Nixie clock powered by the HV PSU described here (the case is made of laser-cut plywood).&lt;/p&gt;">
					<noscript><img src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53666bcfe4b0d727dcd092a4/1399221247085/2014-05-03-IMG_0052.jpg"  alt="A Nixie clock powered by the HV PSU described here (the case is made of laser-cut plywood)."  /></noscript><img class="thumb-image" alt="A Nixie clock powered by the HV PSU described here (the case is made of laser-cut plywood)." data-src="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53666bcfe4b0d727dcd092a4/1399221247085/2014-05-03-IMG_0052.jpg" data-image="http://static.squarespace.com/static/4f367830cb12b0a7471a0f06/t/53666bcfe4b0d727dcd092a4/1399221247085/2014-05-03-IMG_0052.jpg" data-image-dimensions="1280x757" data-image-focal-point="0.5,0.5" data-load="false" data-image-id="53666bcfe4b0d727dcd092a4" data-type="image" />
				</div>
			

			
			<div class="image-caption-wrapper">
				<div class="image-caption"><p>A Nixie clock powered by the HV PSU described here (the case is made of laser-cut plywood).</p></div>
			</div>
			

		</div>
	
	</div>
</div></div><div class="sqs-block markdown-block sqs-block-markdown" data-block-type="44" id="block-yui_3_10_1_1_1399221166517_23581"><div class="sqs-block-content"><ul>
<li>Nick de Smith, whose excellent <a href="http://desmith.net/NMdS/Electronics/NixiePSU.html">Nixie HV Switching PSU</a> page got me started and served as an example of how to publish your work so that others may learn from it.</li>
<li>Helpful people in the <a href="https://groups.google.com/d/forum/neonixie-l‎">neonixie group</a> — this is a good place to learn, you will get lots of friendly and helpful advice.</li>
<li>Texas Instruments engineers helpfully responding in the <a href="http://e2e.ti.com/">E2E</a> forums.</li>
</ul>

<h2 id="revisionhistory">Revision History</h2>

<p>This page was first created on 2014-05-04.</p>

<h2 id="comments">Comments</h2>

<p>If you'd like to add a comment or discuss, see the <a href="http://jan.rychter.com/enblog/designing-a-high-voltage-power-supply-for-nixie-tube-projects-5-2014">corresponding blog post</a>. Or just write to me directly.</p></div></div></div></div></div>
    		</section>

        <div class="page-divider"></div>

        <footer id="footer">

        
          
          <div id="socialLinks" class="social-links" data-content-field="connected-accounts">
            <a href="https://twitter.com/jrychter" target="_blank"><i class="social-twitter"></i><span class="service-label">twitter</span></a><a href="http://www.linkedin.com/in/jrychter" target="_blank"><i class="social-linkedin"></i><span class="service-label">linkedin</span></a><a href="mailto:jan@rychter.com" target="_blank"><i class="social-email"></i><span class="service-label">email</span></a><a href="https://github.com/jwr" target="_blank"><i class="social-github"></i><span class="service-label">github</span></a>
          </div>
          
        

          <div id="bottomNav" data-content-field="navigation-footer-navigation">
	<nav class="foot-nav">
		<ul>
		  
		</ul>
	</nav>
</div><!-- [NavigationWidget: Could not find navigation data in binding with `navigationId` 'footNav'.] -->
          <div class="sqs-layout sqs-grid-12 columns-12" data-layout-label="Footer Content" data-type="block-field" data-updated-on="1388680183904" id="footerBlock"><div class="row sqs-row"><div class="col sqs-col-12 span-12"><div class="sqs-block code-block sqs-block-code" data-block-type="23" id="block-926f52ac37a1cd9f7cb0"><div class="sqs-block-content"><a href="feed://jan.rychter.com/blog/?format=RSS">RSS [PL]</a> | <a href="feed://jan.rychter.com/enblog/?format=RSS">RSS [EN]</a></div></div></div></div></div>

        </footer>

        
        <div id="details" class="info-card" data-content-field="page-settings">
          <div id="info-open"><a href="#info-content" class="icon-info-circle"></a></div>
          <div id="info-content">
            <div id="info-close"><a href="#canvas" class="icon-close"></a></div>
            <div id="info-data">
              <h1 class="logo site-title">Jan Rychter</h1>
              
              
              <div class="page-divider"></div>
              
              <p class="location">Biały Kamień, Warsaw, Mazowieckie, Poland</p>
          		<figure class="map-image"><a href="//maps.google.com/maps?q=52.2062439,20.996325800000022" target="_blank" title="View map in new window"><img src="//maps.googleapis.com/maps/api/staticmap?markers=color:white|52.2062439,20.996325800000022&size=400x200&scale=2&zoom=12.0&style=visibility:simplified|saturation:-100|gamma:0.5&sensor=false"></a></figure>
              
              <div class="page-divider"></div>
              
              <span id="socialLinks" class="social-links">
                <a href="https://twitter.com/jrychter" target="_blank"><i class="social-twitter"></i><span class="service-label">twitter</span></a><a href="http://www.linkedin.com/in/jrychter" target="_blank"><i class="social-linkedin"></i><span class="service-label">linkedin</span></a><a href="mailto:jan@rychter.com" target="_blank"><i class="social-email"></i><span class="service-label">email</span></a><a href="https://github.com/jwr" target="_blank"><i class="social-github"></i><span class="service-label">github</span></a>
              </span>
              
            </div>
          </div>
        </div>
        

    	</div><!-- / #canvas -->
    </div><!-- / #canvasWrapper -->

    <br/>Copyright &copy; 2000-2014 Jan Rychter. All rights reserved.
<script type="text/javascript">
  (Y.on('domready', function () {
	if(Static.SQUARESPACE_CONTEXT.collection.title.match(/PL/)) {
		Y.one('#block-434aca096da66637ff23').hide();
	}
	if(Static.SQUARESPACE_CONTEXT.collection.title.match(/EN/)) {
		Y.one('#block-2ea6dcfba7f4bb12691c').hide();
	}
}));
</script><script type="text/javascript" data-sqs-type="imageloader">(function() {var SQUARESPACE_SIZES=[1500,1E3,750,500,300,100],IMAGE_LOADING_CLASS="loading",ImageLoader=new function(){this.load=function(a,b){function c(a,b,c){var d=new Image;d.onload=b;d.onerror=c;d.src=a}a.getDOMNode&&(a=a.getDOMNode());var d=this._getDataFromNode(a,b),e=!(!d.dimensions||!d.dimensions.width||!d.dimensions.height),l=d.load+"";if("false"===l)return!1;var g=d.mode;if(e&&("fit"==g||"fill"==g)){g=a.parentNode;if(!g)return console.error("Not doing anything, parentNode not found."),!1;if(!this.refresh(a,
b,g))return!1}var n=this._intendToLoad(a,d);if("string"==typeof n&&"viewport"!==l){var m=this.getUrl(n,d),d=a.getAttribute("data-image-resolution");a.getAttribute("src")!==m&&this.isValidResolution(n,d)&&(a.onload=function(){a.className=a.className.replace(IMAGE_LOADING_CLASS," ").trim();a.setAttribute("data-image-resolution",n)},!a.getAttribute("src")&&-1===a.className.indexOf(IMAGE_LOADING_CLASS)&&(a.className+=(a.className?" ":"")+IMAGE_LOADING_CLASS),!a.getAttribute("src")&&e?a.setAttribute("src",
m):c(m,function(){e?a.setAttribute("src",m):(a.setAttribute("data-image-dimensions",this.width+"x"+this.height),ImageLoader.load(a,b))},function(){a.className=a.className.replace(IMAGE_LOADING_CLASS," ").trim();a.setAttribute("src",m)}));return!0}return n};this.refresh=function(a,b,c){a.getDOMNode&&(a=a.getDOMNode());c&&c.getDOMNode&&(c=c.getDOMNode());c=c||a.parentNode;if(!c)return console.error("Not doing anything, parentNode not found."),!1;var d=this._getDataFromNode(a,b),e=c.offsetWidth,l=c.offsetHeight;
b=d.mode;if("none"!=b){var g=d.dimensions.width,n=d.dimensions.height,m=g/n,q=e/l;if(d.fixedRatio)"fill"==b&&q>m||"fit"==b&&q<m?(h=100,k=100*(q/m),r=(100-k)*d.focalPoint.y,p=0):(h=100*(m/q),k=100,r=0,p=(100-h)*d.focalPoint.x),a.style.top=r+"%",a.style.left=p+"%",a.style.width=h+"%",a.style.height=k+"%";else{var f;"fill"===b?f=m>q?l/n:e/g:"fit"===b&&(f=m<q?l/n:e/g);!d.stretch&&("fit"==b&&1<f)&&(f=1);var h=Math.ceil(g*f),k=Math.ceil(n*f);if(0===h||0===k)return!1;var p,r;"fill"===b?(p=Math.min(Math.max(e/
2-h*d.focalPoint.x,e-h),0),r=Math.min(Math.max(l/2-k*d.focalPoint.y,l-k),0)):"fit"===b&&(f=d.fitAlignment,p=f.left?0:f.right?e-h:h<e?(e-h)/2:0,r=f.top?0:f.bottom?l-k:k<l?(l-k)/2:0,"inline"==this._getStyle(a,"display")&&(a.style.fontSize="0px"),this._resetAlt(a,function(){h-=a.offsetHeight-a.clientHeight;k-=a.offsetWidth-a.clientWidth}));a.style.top=Math.ceil(r)+"px";a.style.left=Math.ceil(p)+"px";a.style.width=Math.ceil(h)+"px";a.style.height=Math.ceil(k)+"px"}p=this._getStyle(c,"position");a.style.position=
"relative"==p?"absolute":"relative";if("fill"==b&&(b=this._getStyle(c,"overflow"),!b||"hidden"!=b))c.style.overflow="hidden";return!0}};this._intendToLoad=function(a,b){function c(c,d){"none"===b.mode&&(a.style.width=null,a.style.height=null);var e=parseFloat(a.getAttribute(c)),f=parseFloat(e);if(!f||isNaN(f))e=g._getStyle(a,c),f=parseFloat(e);if(!f||isNaN(f))e=g._getStyle(a,"max-"+c,"max"+(c.substr(0,1).toUpperCase()+c.substr(1))),f=parseFloat(e);if(0===d||e)switch(g._stringType(e)){case "percentage":d=
parseInt(e,10)/100*l["offset"+c.substr(0,1).toUpperCase()+c.substr(1)];break;case "number":d=parseInt(e,10)}!f&&(0!==d&&!a.getAttribute("src"))&&(d=0);return d}b=b||this._getDataFromNode(a);if(!b.source)return!1;var d=a.offsetWidth,e=a.offsetHeight,l=a.parentNode,g=this;this._resetAlt(a,function(){d=c("width",d);e=c("height",e)});0===d&&0===e?(d=b.dimensions.width,e=b.dimensions.height):0===d?d=this.getDimensionForValue("width",e,b):0===e&&(e=this.getDimensionForValue("height",d,b));"viewport"===
b.load&&(a.style.width=Math.floor(d)+"px",a.style.height=Math.floor(e)+"px");return this.getSquarespaceSize(d,e,b)};this._getDataFromNode=function(a,b){b=b||{};var c={focalPoint:{x:0.5,y:0.5},dimensions:{width:null,height:null},mode:"none",fitAlignment:{center:!0},load:"true",stretch:!0,fixedRatio:!1};if(b.focalPoint)c.focalPoint=b.focalPoint;else{var d=a.getAttribute("data-image-focal-point");if(d&&(d=d.split(","))&&2==d.length)c.focalPoint={x:parseFloat(d[0]),y:parseFloat(d[1])}}if(b.dimensions)c.dimensions=
b.dimensions;else if((d=a.getAttribute("data-image-dimensions"))&&(d=d.split("x"))&&2==d.length)c.dimensions={width:parseInt(d[0],10),height:parseInt(d[1],10)};b.mode?c.mode=b.mode:a.parentNode&&(d=a.parentNode.className,-1!==d.indexOf("content-fill")?c.mode="fill":-1!==d.indexOf("content-fit")&&(c.mode="fit"));if("fit"===c.mode&&a.parentNode&&(d=b.fitAlignment||a.getAttribute("data-alignment")||a.parentNode.getAttribute("data-alignment")))c.fitAlignment={top:-1!==d.indexOf("top"),left:-1!==d.indexOf("left"),
center:-1!==d.indexOf("center"),right:-1!==d.indexOf("right"),bottom:-1!==d.indexOf("bottom")};if(b.load)c.load=b.load;else if(d=a.getAttribute("data-load"))c.load=d;if("undefined"!==typeof b.stretch)c.stretch=b.stretch;else if(d=a.getAttribute("data-image-stretch"))c.stretch="true"===d?!0:!1;c.source=b.source?b.source:a.getAttribute("data-src");if(c.source&&(-1!==c.source.indexOf("squarespace.com")||-1!==c.source.indexOf("squarespace.net"))&&"http:"===c.source.substr(0,5)&&"https"===window.location.protocol.substr(0,
5))c.source=c.source.replace("http://","https://");if(b.fixedRatio)c.fixedRatio=b.fixedRatio;else if(d=a.getAttribute("data-fixed-ratio"))c.fixedRatio="true"==d;return c};this._stringType=function(a){return"string"===typeof a&&-1!==a.indexOf("%")?"percentage":isNaN(parseInt(a,10))?NaN:"number"};this._getStyle=function(a,b,c){var d;a.currentStyle?d=a.currentStyle[c||b]:window.getComputedStyle&&(d=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return d};this._isVisible=function(a){a=
a.getBoundingClientRect();return 0<=a.left&&0<=a.top||0<=a.bottom&&0<=a.right||0<=a.left&&0<=a.bottom||0<=a.right&&0<=a.top};this.getSquarespaceSize=function(a,b,c){a=Math.max(b/(c.dimensions.height/c.dimensions.width),a);"number"==typeof window.devicePixelRatio&&(a*=window.devicePixelRatio);for(b=1;b<SQUARESPACE_SIZES.length&&!(a>SQUARESPACE_SIZES[b]);b++);return SQUARESPACE_SIZES[b-1]+"w"};this.getDimensionForValue=function(a,b,c){var d=c.dimensions.width;c=c.dimensions.height;return"width"==a?
d/c*b:"height"==a?c/d*b:NaN};this.getUrl=function(a,b){var c=b.source;return a&&("/"==c[0]||-1!=c.indexOf("squarespace.com")||-1!=c.indexOf("squarespace.net"))?(-1===c.indexOf("format="+a)&&(c=c+(-1!==c.indexOf("?")?"&":"?")+"format="+a),window.Static&&(window.Static.IN_BACKEND&&-1===c.indexOf("storage=local"))&&(c+="&storage=local"),c):b.source};this.isValidResolution=function(a,b){a=parseInt(a,10);b=parseInt(b,10);return isNaN(a)||isNaN(b)?!0:a>b};this._resetAlt=function(a,b){var c=a.getAttribute("alt"),
d=c&&0<c.length&&!a.getAttribute("src");if(d){var e=a.style.display;a.removeAttribute("alt");a.style.display="none";a.offsetHeight+0;a.style.display=e}b.call(this);d&&a.setAttribute("alt",c)}};window.ImageLoader=ImageLoader;var siteCSSHandle,loopHandle,imagesTimer=50;function ancestorHasClass(a,b){return"undefined"!==typeof a.className&&-1!==a.className.indexOf(b)?!0:a.parentNode?ancestorHasClass(a.parentNode,b):!1}
var hasAttr=function(a,b){return a.hasAttribute?a.hasAttribute(b):!!a.attributes[b]},getAttr=function(a,b){return a.getAttribute?a.getAttribute(b):a.attributes[b]};function init(){var a=document.images;if(0<a.length)for(var b=0,c=a.length;b<c;b++)(hasAttr(a[b],"data-image")||hasAttr(a[b],"data-src"))&&"false"!==getAttr(a[b],"data-load")+""&&ImageLoader.load(a[b])}init();window.YUI&&YUI.add("squarespace-imageloader",function(a){});
})();</script>
<script>Squarespace.afterBodyLoad(Y);</script>

  

  </body>
</html>

