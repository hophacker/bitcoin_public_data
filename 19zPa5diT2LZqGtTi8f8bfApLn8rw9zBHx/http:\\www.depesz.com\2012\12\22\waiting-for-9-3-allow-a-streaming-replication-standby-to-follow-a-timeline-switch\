http://www.depesz.com/2012/12/22/waiting-for-9-3-allow-a-streaming-replication-standby-to-follow-a-timeline-switch/
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 23 Jul 2014 11:06:41 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Powered-By: PHP/5.5.12-1
X-Pingback: http://www.depesz.com/xmlrpc.php
Link: <http://www.depesz.com/?p=2587>; rel=shortlink

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="coder" content="MHweb.pl" />
<title>select * from depesz;  &raquo; Blog Archive   &raquo; Waiting for 9.3 &#8211; Allow a streaming replication standby to follow a timeline switch.</title>
<meta name="generator" content="WordPress 3.9.1" /> <!-- leave this for stats -->
<link rel="stylesheet" href="http://www.depesz.com/wp-content/themes/depesz/style.css" type="text/css" media="screen" />
<!-- <link rel="stylesheet" href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/style1.css" type="text/css" media="screen" /> -->

<link rel="alternate" type="application/rss+xml" title="select * from depesz; RSS Feed" href="http://www.depesz.com/feed/" />
<link rel="pingback" href="http://www.depesz.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="select * from depesz; &raquo; Waiting for 9.3 &#8211; Allow a streaming replication standby to follow a timeline switch. Comments Feed" href="http://www.depesz.com/2012/12/22/waiting-for-9-3-allow-a-streaming-replication-standby-to-follow-a-timeline-switch/feed/" />
<link rel='stylesheet' id='cookie-style-css'  href='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.depesz.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.depesz.com/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.0.3' type='text/css' media='all' />
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var user_options = {"messageContent":"In order for this site to work properly, and in order to evaluate and improve the site we need to store small files (called cookies) on your computer.<br\/> Over 90% of all websites do this, however, since the 25th of May 2011 we are required by EU regulations to obtain your consent first. What do you say?","redirectLink":"http:\/\/google.com","okText":"That's fine","notOkText":"I don't agree","cookieName":"jsCookiewarning29Check","ajaxUrl":"http:\/\/www.depesz.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.js?ver=3.9.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.depesz.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.depesz.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://www.depesz.com/2012/12/22/waiting-for-9-3-allow-a-streaming-replication-standby-to-follow-a-timeline-switch/' />
<link rel='shortlink' href='http://www.depesz.com/?p=2587' />

<link rel="stylesheet" href="http://www.depesz.com/wp-content/plugins/dd-formmailer/dd-formmailer.css" type="text/css" media="screen" />
<style type="text/css">

</style>
<!--[if lte IE 7]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie.css" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 6]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
</head>
<body>
<div id="box">
	<div id="up">
		<div id="logo"></div>
		<div id="menu">

			<div class="lc"></div>
			
			<div class="main">
				<div id="nav">
					<ul class="nav">
					<li class="first"><a href="http://www.depesz.com">Blog</a></li>
					<li class="page_item page-item-1947"><a href="http://www.depesz.com/projects/">Projects</a></li>
<li class="page_item page-item-1618"><a href="http://www.depesz.com/contact/">Contact</a></li>
					</ul>
				</div>
			</div>

			<div class="rc"></div>

		</div>
	</div>

	<div id="top_cont"></div>
	<div id="mainbck">



	<div id="content">

	
		<div class="entry">
			<div class="post" id="post-2587">
				<div class="topek">
					<div class="name">
						<a href="http://www.depesz.com/2012/12/22/waiting-for-9-3-allow-a-streaming-replication-standby-to-follow-a-timeline-switch/" rel="bookmark" title="Permanent Link to Waiting for 9.3 &#8211; Allow a streaming replication standby to follow a timeline switch.">Waiting for 9.3 &#8211; Allow a streaming replication standby to follow a timeline switch.</a><div class="rss-img"><a href="http://www.depesz.com/feed/">&nbsp;&nbsp;</a></div>
					</div>

					<small>December 22nd, 2012 by depesz | Tags: <a href="http://www.depesz.com/tag/failover/" rel="tag">failover</a>, <a href="http://www.depesz.com/tag/pg93/" rel="tag">pg93</a>, <a href="http://www.depesz.com/tag/postgresql/" rel="tag">postgresql</a>, <a href="http://www.depesz.com/tag/replication/" rel="tag">replication</a>, <a href="http://www.depesz.com/tag/standby/" rel="tag">standby</a>, <a href="http://www.depesz.com/tag/streaming/" rel="tag">streaming</a>, <a href="http://www.depesz.com/tag/timeline/" rel="tag">timeline</a> |  <a href="http://www.depesz.com/2012/12/22/waiting-for-9-3-allow-a-streaming-replication-standby-to-follow-a-timeline-switch/#respond" title="Comment on Waiting for 9.3 &#8211; Allow a streaming replication standby to follow a timeline switch.">No comments &#187;</a></small>
<br><small><big>Did it help? If yes - maybe you can help me? Donate BTC to <a href="https://blockchain.info/address/19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx">19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx</a></big></small>
				</div>
				
				<div class="the">
					<p>On 13th of December, Heikki Linnakangas <a href="http://git.postgresql.org/pg/commitdiff/abfd192b1b5ba5216ac4b1f31dcd553106304b19">committed</a> patch:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="text" style="font-family:monospace;">Allow a streaming replication standby to follow a timeline switch.
&nbsp;
Before this patch, streaming replication would refuse to start replicating
if the timeline in the primary doesn't exactly match the standby. The
situation where it doesn't match is when you have a master, and two
standbys, and you promote one of the standbys to become new master.
Promoting bumps up the timeline ID, and after that bump, the other standby
would refuse to continue.
&nbsp;
There's significantly more timeline related logic in streaming replication
now. First of all, when a standby connects to primary, it will ask the
primary for any timeline history files that are missing from the standby.
The missing files are sent using a new replication command TIMELINE_HISTORY,
and stored in standby's pg_xlog directory. Using the timeline history files,
the standby can follow the latest timeline present in the primary
(recovery_target_timeline='latest'), just as it can follow new timelines
appearing in an archive directory.
&nbsp;
START_REPLICATION now takes a TIMELINE parameter, to specify exactly which
timeline to stream WAL from. This allows the standby to request the primary
to send over WAL that precedes the promotion. The replication protocol is
changed slightly (in a backwards-compatible way although there's little hope
of streaming replication working across major versions anyway), to allow
replication to stop when the end of timeline reached, putting the walsender
back into accepting a replication command.
&nbsp;
Many thanks to Amit Kapila for testing and reviewing various versions of
this patch.</pre></td></tr></table></div>

<p><span id="more-2587"></span></p>
<p>I actually had a problem understanding what this patch is about. After all &#8211; following timeline change <a href="http://philsorber.blogspot.com/2012/03/what-to-do-when-your-timeline-isnt.html">is possible</a> for quite some time now. I did it in 9.1 or 9.2. Phil did it of course too. So what is the idea about this newest patch?</p>
<p>Well. Apparently &#8211; the idea is that now the timeline switch can happen when working with <em>only</em> streaming replication &#8211; without WAL archive at all.</p>
<p>This is arguably not so good idea (that is: to run without WAL archive), but it's definitely possible, so let's test is.</p>
<p>Here goes a little digression &#8211; just when this patch was committed, I had actually quite a lot of problems to get it working. Luckily Heikki was very helpful, and pushed some fixes. Finally, I tested the state as of <a href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=1ff92eea140ccf0503b7399549031976e5c6642e">this commit</a>.</p>
<p>To test it, I did setup three virtual machines:</p>
<ul>
<li>ubuntu1 &#8211; ip: 172.28.173.140 &#8211; master</li>
<li>ubuntu2 &#8211; ip: 172.28.173.141 &#8211; slave</li>
<li>ubuntu3 &#8211; ip: 172.28.173.142 &#8211; slave</li>
</ul>
<p>Master has also floating IP used for DB communication &#8211; 172.28.173.253. This IP will be taken over by slave (ubuntu2) in my test.</p>
<p>On all machines I have PostgreSQL 9.3 setup, and replication is done from ubuntu1 to ubuntu2, and from ubuntu1 to ubuntu3, but ubuntu2/3, to connect to master, use not .140 IP, but rather the floating IP .253.</p>
<p>On ubuntu2 (slave):</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="text" style="font-family:monospace;">=$ pid=$(head -n1 data/postmaster.pid); ps uwf -p $pid --ppid $pid
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
pgdba     1300  0.0  0.6 170112 12812 pts/0    S    12:28   0:00 /home/pgdba/work/bin/postgres
pgdba     1304  0.0  0.0  23604   788 ?        Ss   12:28   0:00  \_ postgres: logger process     
pgdba     1305  0.0  0.0 170220  1536 ?        Ss   12:28   0:00  \_ postgres: startup process   recovering 000000010000000000000010
pgdba     1306  0.4  0.1 184160  2656 ?        Ss   12:28   0:00  \_ postgres: wal receiver process   streaming 0/11000000
pgdba     1307  0.0  0.0 170112   952 ?        Ss   12:28   0:00  \_ postgres: checkpointer process   
pgdba     1308  0.0  0.0 170112  1484 ?        Ss   12:28   0:00  \_ postgres: writer process     
pgdba     1309  0.0  0.0  25700   864 ?        Ss   12:28   0:00  \_ postgres: stats collector process   
&nbsp;
=$ cat data/recovery.conf
standby_mode = 'on'
primary_conninfo = 'port=5920 user=replication host=172.28.173.253'
trigger_file = '/tmp/finish.replication'
recovery_target_timeline='latest'</pre></td></tr></table></div>

<p>On ubuntu3 (slave):</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="text" style="font-family:monospace;">=$ pid=$(head -n1 data/postmaster.pid); ps uwf -p $pid --ppid $pid
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
pgdba     1322  0.0  0.6 170108 12824 pts/0    S    12:28   0:00 /home/pgdba/work/bin/postgres
pgdba     1326  0.0  0.0  23600   800 ?        Ss   12:28   0:00  \_ postgres: logger process     
pgdba     1327  0.0  0.0 170216  1544 ?        Ss   12:28   0:00  \_ postgres: startup process   recovering 000000010000000000000010
pgdba     1328  0.3  0.1 184156  2716 ?        Ss   12:28   0:00  \_ postgres: wal receiver process   streaming 0/11000000
pgdba     1329  0.0  0.0 170108   960 ?        Ss   12:28   0:00  \_ postgres: checkpointer process   
pgdba     1330  0.0  0.0 170108  1492 ?        Ss   12:28   0:00  \_ postgres: writer process     
pgdba     1331  0.0  0.0  25696   872 ?        Ss   12:28   0:00  \_ postgres: stats collector process   
&nbsp;
=$ cat data/recovery.conf
standby_mode = 'on'
primary_conninfo = 'port=5920 user=replication host=172.28.173.253'
trigger_file = '/tmp/finish.replication'
recovery_target_timeline='latest'</pre></td></tr></table></div>

<p>As you can see &#8211; both are configured the same way, are connecting to special, floating IP.</p>
<p>On ubuntu1 (master) I can see:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="sql" style="font-family:monospace;"><span style="color: #66cc66;">=</span>$ pid<span style="color: #66cc66;">=</span>$<span style="color: #66cc66;">&#40;</span>head <span style="color: #66cc66;">-</span>n1 <span style="color: #993333; font-weight: bold;">data</span><span style="color: #66cc66;">/</span>postmaster<span style="color: #66cc66;">.</span>pid<span style="color: #66cc66;">&#41;</span>; ps uwf <span style="color: #66cc66;">-</span>p $pid <span style="color: #808080; font-style: italic;">--ppid $pid</span>
<span style="color: #993333; font-weight: bold;">USER</span>       PID %CPU %MEM    VSZ   RSS TTY      STAT <span style="color: #993333; font-weight: bold;">START</span>   <span style="color: #993333; font-weight: bold;">TIME</span> COMMAND                                                                                                                                                                                                          
pgdba     <span style="color: #cc66cc;">1115</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.6</span> <span style="color: #cc66cc;">170112</span> <span style="color: #cc66cc;">12884</span> pts<span style="color: #66cc66;">/</span><span style="color: #cc66cc;">0</span>    S    <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00 <span style="color: #66cc66;">/</span>home<span style="color: #66cc66;">/</span>pgdba<span style="color: #66cc66;">/</span><span style="color: #993333; font-weight: bold;">work</span><span style="color: #66cc66;">/</span>bin<span style="color: #66cc66;">/</span>postgres                                                                                                                                                                                    
pgdba     <span style="color: #cc66cc;">1119</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">23604</span>   <span style="color: #cc66cc;">804</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: logger process                                                                                                                                                                                     
pgdba     <span style="color: #cc66cc;">1121</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.1</span> <span style="color: #cc66cc;">170220</span>  <span style="color: #cc66cc;">2380</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: checkpointer process                                                                                                                                                                               
pgdba     <span style="color: #cc66cc;">1122</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.0</span> <span style="color: #cc66cc;">170112</span>  <span style="color: #cc66cc;">1760</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: writer process     
pgdba     <span style="color: #cc66cc;">1123</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.0</span> <span style="color: #cc66cc;">170112</span>   <span style="color: #cc66cc;">968</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: wal writer process   
pgdba     <span style="color: #cc66cc;">1124</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.1</span> <span style="color: #cc66cc;">170976</span>  <span style="color: #cc66cc;">2268</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: autovacuum launcher process   
pgdba     <span style="color: #cc66cc;">1125</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">25700</span>   <span style="color: #cc66cc;">852</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: archiver process   <span style="color: #993333; font-weight: bold;">last</span> was 000000010000000000000010
pgdba     <span style="color: #cc66cc;">1126</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">25832</span>  <span style="color: #cc66cc;">1044</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">25</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: stats collector process   
pgdba     <span style="color: #cc66cc;">1662</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.1</span> <span style="color: #cc66cc;">171328</span>  <span style="color: #cc66cc;">2824</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">28</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: wal sender process replication 172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>141<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">45099</span><span style="color: #66cc66;">&#41;</span> streaming <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">/</span><span style="color: #cc66cc;">11000000</span>
pgdba     <span style="color: #cc66cc;">1663</span>  <span style="color: #cc66cc;">0.0</span>  <span style="color: #cc66cc;">0.1</span> <span style="color: #cc66cc;">171196</span>  <span style="color: #cc66cc;">2824</span> ?        Ss   <span style="color: #cc66cc;">12</span>:<span style="color: #cc66cc;">28</span>   <span style="color: #cc66cc;">0</span>:00  \_ postgres: wal sender process replication 172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>142<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">45750</span><span style="color: #66cc66;">&#41;</span> streaming <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">/</span><span style="color: #cc66cc;">11000000</span>
&nbsp;
<span style="color: #cc66cc;">15</span>:<span style="color: #cc66cc;">45</span>:<span style="color: #cc66cc;">59</span> pgdba@ubuntu1 ~
<span style="color: #66cc66;">=</span>$ ifconfig <span style="color: #66cc66;">|</span> grep <span style="color: #66cc66;">-</span>A1 ^eth
eth0      Link encap:Ethernet  HWaddr 08:00:<span style="color: #cc66cc;">27</span>:07:<span style="color: #cc66cc;">98</span>:05
          inet addr:172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>140  Bcast:172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>255  Mask:255<span style="color: #66cc66;">.</span>255<span style="color: #66cc66;">.</span>255<span style="color: #66cc66;">.</span>0
<span style="color: #808080; font-style: italic;">--</span>
eth0:<span style="color: #cc66cc;">0</span>    Link encap:Ethernet  HWaddr 08:00:<span style="color: #cc66cc;">27</span>:07:<span style="color: #cc66cc;">98</span>:05
          inet addr:172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>253  Bcast:172<span style="color: #66cc66;">.</span>28<span style="color: #66cc66;">.</span>173<span style="color: #66cc66;">.</span>255  Mask:255<span style="color: #66cc66;">.</span>255<span style="color: #66cc66;">.</span>255<span style="color: #66cc66;">.</span>0</pre></td></tr></table></div>

<p>Now. I want to failover to ubuntu2. Ubuntu1 will be basically discarded. So I do:</p>
<ul>
<li>on Ubuntu1:
<ul>
<li>pg_ctl -D data/ -m fast stop</li>
<li>sudo ifdown eth0:0</li>
</ul>
</li>
<li>on Ubuntu2:
<ul>
<li>touch /tmp/finish.replication</li>
<li>sudo ifup eth0:0</li>
</ul>
</li>
<p>And &#8211; after a while &#8211; ubuntu3 does reconnect to new master (ubuntu2) and continues with replication. All works.</p>
<p>I also did test it in case where Ubuntu3 was lagging behind replication &#8211; after switch it was able to catchup and replicate just fine. Of course &#8211; to make this work you have to have sensibly high wal_keep_segments GUC.</p>
<p>Great work, thanks Heikki, Amit and Thom.</p>
<p><!-- vim: set spell spelllang=en_US ft=xhtml: --></p>

									</div>
			</div>
		</div>
			
		<div class="comm">
			
<!-- You can start editing here. -->

<div class="bobcomments">



	
	
	<form action="http://www.depesz.com/wp-comments-post.php" method="post" id="commentform">

	<h2 id="respond">Leave a comment</h2>

		
	
		<label for="author">Name</label>
		<input type="text" name="author" id="author" value="" size="22" tabindex="2" />
				
		<label for="email">E-mail</label>
		<input type="text" name="email" id="email" value="" tabindex="3" size="22" />		
		
		<label for="url">Website</label>
		<input type="text" name="url" id="url" value="" size="22" tabindex="4" />
	
	
		<label for="text">Your text</label>
		<textarea name="comment" id="comment" cols="5" rows="10" tabindex="5"></textarea>

		<input name="submit" type="submit" id="submit" tabindex="6" value="Submit comment" />
		<input type="hidden" name="comment_post_ID" value="2587" />
	
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="d08355f82f" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="164"/></p>
	</form>


</div>
		</div>
	
	
	</div>
<div id="sidebar">
<div class="rsidebar">
		<ul>
			<li id="search-3" class="widget widget_search"><h2 class="widgettitle">Search</h2>
<form method="get" id="searchform" action="http://www.depesz.com/">
<input name="s" id="s" type="text" value="Write your text. Press the button!" onfocus="if (this.value == 'Write your text. Press the button!') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Write your text. Press the button!';}" tabindex="1"/>
<input type="submit" id="searchsubmit" value="" />
</form>
<br /><br />
<div id="podzialka"></div></li>
<li id="linkcat-659" class="widget widget_links"><h2 class="widgettitle">Follow me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.depesz.com/comments/feed/">Comments RSS</a></li>
<li><a href="http://depesz.com/feed/">Posts RSS</a></li>

	</ul>
</li>


<!-- Wordpress Popular Posts Plugin v3.0.3 [W] [weekly] [views] [regular] -->
<li id="wpp-3" class="widget popular-posts">
<h2 class="widgettitle">Popular Posts</h2>

<ul class="wpp-list">
<li><a href="http://www.depesz.com/2014/07/15/waiting-for-9-5-psql-show-tablespace-size-in-db/" title="Waiting for 9.5 &#8211; psql: Show tablespace size in \db+" class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; psql: Show tablespace size in \db+</a>  <span class="post-stats"><span class="wpp-comments">1 comment</span> | <span class="wpp-views">596 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/07/14/waiting-for-9-5-implement-import-foreign-schema/" title="Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA." class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA.</a>  <span class="post-stats"><span class="wpp-comments">1 comment</span> | <span class="wpp-views">371 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/" title="Why is UPSERT so complicated?" class="wpp-post-title" target="_self">Why is UPSERT so complicated?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">258 views</span></span> </li>
<li><a href="http://www.depesz.com/2010/03/02/charx-vs-varcharx-vs-varchar-vs-text/" title="CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03" class="wpp-post-title" target="_self">CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">203 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/05/06/understanding-postgresql-conf-log/" title="Understanding postgresql.conf : log*" class="wpp-post-title" target="_self">Understanding postgresql.conf : log*</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">156 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/09/how-much-ram-is-postgresql-using/" title="How much RAM is PostgreSQL using?" class="wpp-post-title" target="_self">How much RAM is PostgreSQL using?</a>  <span class="post-stats"><span class="wpp-comments">1 comment</span> | <span class="wpp-views">140 views</span></span> </li>
<li><a href="http://www.depesz.com/2008/05/05/error-operator-does-not-exist-integer-text-how-to-fix-it/" title="&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?" class="wpp-post-title" target="_self">&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">136 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/01/29/getting-count-of-distinct-elements-per-group-in-postgresql/" title="Getting count of distinct elements, per group, in PostgreSQL." class="wpp-post-title" target="_self">Getting count of distinct elements, per group, in PostgreSQL.</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">128 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/07/14/write-ahead-log-understanding-postgresql-conf-checkpoint_segments-checkpoint_timeout-checkpoint_warning/" title="Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning" class="wpp-post-title" target="_self">Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">125 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/03/07/waiting-for-9-1-foreach-in-array/" title="Waiting for 9.1 &#8211; FOREACH IN ARRAY" class="wpp-post-title" target="_self">Waiting for 9.1 &#8211; FOREACH IN ARRAY</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">103 views</span></span> </li>

</ul>
</li>

<!-- End Wordpress Popular Posts Plugin v3.0.3 -->
<li id="linkcat-4" class="widget widget_links"><h2 class="widgettitle">postgresql</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.postgresql.org/docs/current/interactive/index.html">Documentation</a></li>
<li><a href="http://explain.depesz.com/">Explain Analyze analyzer</a></li>
<li><a href="irc://irc.freenode.net/#postgresql">IRC help channel</a></li>
<li><a href="http://archives.postgresql.org/">Mailing Lists search</a></li>
<li><a href="http://planet.postgresql.org/">PG Planet</a></li>
<li><a href="http://www.postgresql.org/" title="strona domowa postgresqla">PostgreSQL Home Page</a></li>

	</ul>
</li>

<li id="linkcat-376" class="widget widget_links"><h2 class="widgettitle">About me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://search.cpan.org/~depesz/">CPAN</a></li>
<li><a href="https://github.com/depesz/">GitHub</a></li>
<li><a href="http://linkedin.com/in/depesz">Linked In</a></li>
<li><a href="http://www.depesz.com/toyota-gt86/">Samoch√≥d</a></li>

	</ul>
</li>

<li id="theme-switcher" class="widget widget_themeswitcher"><h2 class="widgettitle">Theme</h2>
<ul id="themeswitcher">
<li>
       <select style="width:140px" name="themeswitcher" onchange="location.href='http://www.depesz.com/index.php?wptheme=' + this.options[this.selectedIndex].value;">
               <option value="AS 400">AS 400</option>
               <option value="GrayGA">GrayGA</option>
               <option value="Twenty Eleven">Twenty Eleven</option>
               <option value="Twenty Fourteen">Twenty Fourteen</option>
               <option value="Twenty Ten">Twenty Ten</option>
               <option value="Twenty Thirteen">Twenty Thirteen</option>
               <option value="Twenty Twelve">Twenty Twelve</option>
               <option value="WordPress Classic">WordPress Classic</option>
               <option value="WordPress Default">WordPress Default</option>
               <option value="Wordpress Depesz" selected="selected">Wordpress Depesz</option>
       </select>
</li>
</ul></li>
		</ul>
</div>
		
</div>



<div id="space"></div>
</div>
<div id="bottom">
	<div class="navigation">			
					</div>
</div>

<!-- Powered by WPtouch: 3.4.4 --><script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/akismet/_inc/form.js?ver=3.0.1'></script>
</div>

</body>
</html>

